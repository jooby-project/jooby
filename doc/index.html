<!doctype html>
<html lang="en">
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <title>jooby: documentation</title> 
  <meta name="description" content="Scalable, fast and modular micro web framework for Java. Build small/large apps easily and quickly with Netty, Undertow or Jetty."> 
  <meta name="keywords" content="Java, Micro Web Framework, Async, Easy to use, Micro, Sinatra, Express, Scalable, Modern, Best, Web, Framework, Lightweight, Microservices, do more, more easily"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="canonical" href="#"> 
  <link rel="publisher" href="#"> 
  <meta name="robots" content="robots.txt"> 
  <meta name="og:title" content="jooby"> 
  <meta name="og:description" content="Scalable, fast and modular micro web framework for Java"> 
  <!--
    og:type
    SI EL TEMPLATE ES UN ARTICULO (NOTA, VIDEO, ETC) CAMBIAR
    "website" por "article"
    --> 
  <meta name="og:type" content="website"> 
  <meta name="og:url" content="http://jooby.org"> 
  <!--
    og:image
    SI ES UNA NOTA Y LA NOTA TIENE UNA IMAGEN DE PREVIEW SE DEBE
    CAMBIAR POR UNA IMAGEN CON LAS SIGUIENTES ESPECIFICACIONES
    ANCHO: 200
    ALTO: 200
    FORMATO: JPG
    --> 
  <meta name="og:image" content="http://jooby.org/resources/images/apps/facebook.jpg"> 
  <meta name="og:site_name" content="jooby"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:title" content="jooby - do more! more easily!!"> 
  <!--
    twitter:image
    SI ES UNA NOTA Y LA NOTA TIENE UNA IMAGEN DE PREVIEW SE DEBE
    CAMBIAR POR UNA IMAGEN CON LAS SIGUIENTES ESPECIFICACIONES
    ANCHO: 280
    ALTO: 150
    FORMATO: JPG
    TAMAÑO MAXIMO: 1MB
    --> 
  <meta name="twitter:image" content="http://jooby.org/resources/images/apps/twitter.jpg"> 
  <meta name="twitter:site" content="@joobyproject"> 
  <meta name="twitter:creator" content="https://twitter.com/edgarespina"> 
  <meta name="twitter:domain" content="http://jooby.org"> 
  <meta name="twitter:url" content="https://twitter.com/joobyproject"> 
  <meta name="twitter:description" content="Scalable, fast and modular micro web framework for Java"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed57.png" sizes="57x57"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed60.png" sizes="60x60"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed72.png" sizes="72x72"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed76.png" sizes="76x76"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed114.png" sizes="114x114"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed120.png" sizes="120x120"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed144.png" sizes="144x144"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed152.png" sizes="152x152"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed180.png" sizes="180x180"> 
  <link href="/resources/images/apps/favicon.ico" rel="shortcut icon"> 
  <link href="/resources/images/apps/favicon.png" rel="icon" sizes="16x16" type="image/png"> 
  <link href="/resources/images/apps/favicon32.png" rel="icon" sizes="32x32" type="image/png"> 
  <link href="/resources/images/apps/favicon96.png" rel="icon" sizes="96x96" type="image/png"> 
  <link href="/resources/images/apps/android-chrome.png" rel="icon" sizes="192x192" type="image/png"> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,300,500,700"> 
  <link rel="stylesheet" href="/resources/styles/application.css"> 
  <link rel="stylesheet" href="/resources/styles/github.css"> 
  <link rel="stylesheet" href="/resources/styles/devices.css"> 
  <link rel="stylesheet" href="/resources/styles/sprites.css"> 
 </head> 
 <body class="page-section page-sidebar"> 
  <header class="site-header"> 
   <div class="row">
    <a href="/" title="Home" class="site-logo"><img src="/resources/images/logo_jooby-2x.png" alt="Logo Jooby" width="76" height="31"></a>
    <a class="show-mobile open-menu"><span></span></a> 
    <nav class="site-nav"> 
     <ul> 
      <li class=""><a href="/quickstart" title="Quick start">QUICK START</a></li> 
      <li class="active"><a href="/doc" title="Doc">DOCS</a></li> 
      <li class=""><a href="/modules" title="Modules">MODULES</a></li> 
      <li class=""><a href="/community" title="Community">COMMUNITY</a></li> 
      <li class=""><a href="/faq" title="FAQ">FAQ</a></li> 
      <li><a href="/apidocs" target="_blank" title="API docs">API DOCS</a></li> 
     </ul> 
    </nav> 
   </div> 
  </header> 
  <main role="main" class="site-content"> 
   <div class="section-title"> 
    <div class="row"> 
     <h1>Documentation</h1> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="section-sidebar" style="position: fixed; left: 120px; top: 160px; bottom: 20px;"> 
     <div class="show-mobile menu-open">
      do more, more easily
     </div> 
     <ul> 
      <li class="active"> <a href="#do-more-more-easily">do more, more easily</a></li> 
      <li class=""> <a href="#application">application</a>
       <ul> 
        <li> <a href="#application-life-cycle">life cycle</a></li> 
        <li> <a href="#application-logging">logging</a></li>
       </ul></li> 
      <li class=""> <a href="#conf-env-and-logging">conf, env and logging</a>
       <ul> 
        <li> <a href="#conf-env-and-logging-property-access">property access</a></li> 
        <li> <a href="#conf-env-and-logging-application-env">application.env</a></li> 
        <li> <a href="#conf-env-and-logging-turn-on-off-features">turn on/off features</a></li> 
        <li> <a href="#conf-env-and-logging-special-properties">special properties</a></li> 
        <li> <a href="#conf-env-and-logging-precedence">precedence</a></li>
       </ul></li> 
      <li class=""> <a href="#modules">modules</a>
       <ul> 
        <li> <a href="#modules-do-less-and-be-flexible">do less and be flexible</a></li> 
        <li> <a href="#modules-creating-modules">creating modules</a></li> 
        <li> <a href="#modules-module-properties">module properties</a></li> 
        <li> <a href="#modules-usage">usage</a></li>
       </ul></li> 
      <li class=""> <a href="#routes">routes</a>
       <ul> 
        <li> <a href="#routes-creating-routes">creating routes</a></li> 
        <li> <a href="#routes-route-handler">route handler</a></li> 
        <li> <a href="#routes-path-patterns">path patterns</a></li> 
        <li> <a href="#routes-static-files">static files</a></li> 
        <li> <a href="#routes-precedence-and-order">precedence and order</a></li> 
        <li> <a href="#routes-request-handling">request handling</a></li> 
        <li> <a href="#routes-interceptors">interceptors</a></li> 
        <li> <a href="#routes-mvc-routes">mvc routes</a></li> 
        <li> <a href="#routes-dynamic-advanced-routing">dynamic / advanced routing</a></li> 
        <li> <a href="#routes-properties">properties</a></li>
       </ul></li> 
      <li class=""> <a href="#request">request</a>
       <ul> 
        <li> <a href="#request-params">params</a></li> 
        <li> <a href="#request-headers">headers</a></li> 
        <li> <a href="#request-body">body</a></li> 
        <li> <a href="#request-form-submit">form submit</a></li> 
        <li> <a href="#request-file-upload">file upload</a></li> 
        <li> <a href="#request-locals">locals</a></li> 
        <li> <a href="#request-flash-scope">flash scope</a></li> 
        <li> <a href="#request-require">require</a></li> 
        <li> <a href="#request-access-log">access log</a></li>
       </ul></li> 
      <li class=""> <a href="#response">response</a>
       <ul> 
        <li> <a href="#response-send">send</a></li> 
        <li> <a href="#response-headers">headers</a></li> 
        <li> <a href="#response-send-file">send file</a></li> 
        <li> <a href="#response-content-negotiation">content negotiation</a></li>
       </ul></li> 
      <li class=""> <a href="#session">session</a>
       <ul> 
        <li> <a href="#session-usage">usage</a></li> 
        <li> <a href="#session-no-timeout">no timeout</a></li> 
        <li> <a href="#session-cookie">cookie</a></li>
       </ul></li> 
      <li class=""> <a href="#error-handling">error handling</a>
       <ul> 
        <li> <a href="#error-handling-default-err-handler">default err handler</a></li> 
        <li> <a href="#error-handling-custom-err-handler">custom err handler</a></li> 
        <li> <a href="#error-handling-status-code">status code</a></li>
       </ul></li> 
      <li class=""> <a href="#parser-and-renderer">parser and renderer</a>
       <ul> 
        <li> <a href="#parser-and-renderer-parser">parser</a></li> 
        <li> <a href="#parser-and-renderer-renderer">renderer</a></li> 
        <li> <a href="#parser-and-renderer-view-engine">view engine</a></li>
       </ul></li> 
      <li class=""> <a href="#async">async</a>
       <ul> 
        <li> <a href="#async-threads">threads</a></li> 
        <li> <a href="#async-deferred">deferred</a></li> 
        <li> <a href="#async-RxJava-example">RxJava example</a></li>
       </ul></li> 
      <li class=""> <a href="#http-">http/2</a>
       <ul> 
        <li> <a href="#http--server-push">server push</a></li>
       </ul></li> 
      <li class=""> <a href="#server-sent-events">server-sent events</a>
       <ul> 
        <li> <a href="#server-sent-events-usage">usage</a></li> 
        <li> <a href="#server-sent-events-structured-data">structured data</a></li> 
        <li> <a href="#server-sent-events-request-params">request params</a></li> 
        <li> <a href="#server-sent-events-connection-lost">connection lost</a></li> 
        <li> <a href="#server-sent-events-keep-alive-time">keep alive time</a></li> 
        <li> <a href="#server-sent-events-require">require</a></li> 
        <li> <a href="#server-sent-events-example">example</a></li>
       </ul></li> 
      <li class=""> <a href="#web-sockets">web sockets</a>
       <ul> 
        <li> <a href="#web-sockets-require">require</a></li> 
        <li> <a href="#web-sockets-consumes">consumes</a></li> 
        <li> <a href="#web-sockets-produces">produces</a></li>
       </ul></li> 
      <li class=""> <a href="#cors">cors</a>
       <ul> 
        <li> <a href="#cors-usage">usage</a></li>
       </ul></li> 
      <li class=""> <a href="#xss">xss</a>
       <ul> 
        <li> <a href="#xss-usage">usage</a></li> 
        <li> <a href="#xss-modules">modules</a></li>
       </ul></li> 
      <li class=""> <a href="#https">https</a>
       <ul> 
        <li> <a href="#https-certificates">certificates</a></li>
       </ul></li> 
      <li class=""> <a href="#javascript">javascript</a>
       <ul> 
        <li> <a href="#javascript-hello-world">hello world</a></li> 
        <li> <a href="#javascript-jooby-function">jooby function</a></li> 
        <li> <a href="#javascript-routes">routes</a></li> 
        <li> <a href="#javascript-running-a-javascript-app">running a javascript app</a></li>
       </ul></li> 
      <li class=""> <a href="#jooby-conf">jooby.conf</a></li> 
      <li class=""> <a href="#mime-properties">mime.properties</a></li> 
     </ul> 
    </div> 
    <div class="section-content"> 
     <div class="datalist" id="do-more-more-easily"> 
      <div class="datalist-title active"> 
       <h2>do more, more easily</h2> 
      </div> 
      <div class="datalist-content"> 
       <ul> 
        <li><strong>Simple</strong> and <strong>effective</strong> programming model for building small and large scale web applications</li> 
        <li>Build with <strong>developer productivity</strong> in mind</li> 
        <li>Plain <strong>Java DSL</strong> for routes (no XML, or similar)</li> 
        <li><strong>Reflection</strong>, <strong>annotations</strong> and <strong>dependency injection</strong> are kept to a <strong>minimum</strong> and in some cases it is completely optional</li> 
        <li><strong>No classpath hell</strong>, the default deployment model uses a normal JVM bootstrap</li> 
        <li>Modules are easy to use and do as less as possible</li> 
       </ul> 
       <p><a href="http://jooby.org">Jooby</a> keeps it <strong>simple</strong> but yet <strong>powerful</strong>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="application"> 
      <div class="datalist-title "> 
       <h2>application</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>A Jooby app looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span> <span class="c1">// 1.</span>

  <span class="o">{</span>
    <span class="c1">// 2. use a module</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule</span><span class="o">());</span>

    <span class="c1">// 2. listen for application start and stop events.</span>
    <span class="n">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"starting app"</span><span class="o">));</span>
    <span class="n">onStop</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"stopping app"</span><span class="o">));</span>

    <span class="c1">// 2. add a route</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"Hello"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
    <span class="c1">// 3. run my app</span>
    <span class="n">run</span><span class="o">(</span><span class="nl">App:</span><span class="o">:</span><span class="k">new</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>1) You create a new App by extending Jooby.</p> 
       <p>2) From the instance initializer you can use modules, define routes add life cycle callbacks.</p> 
       <p>3) Finally run the application.</p> 
       <h3 id="application-life-cycle">life cycle</h3> 
       <p>Application provides start and stop events. These events are useful for starting/stopping services.</p> 
       <h4 id="application-onStart-onStop-events">onStart/onStop events</h4> 
       <p>Start/stop callbacks are accessible via application:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
   <span class="n">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"starting app"</span><span class="o">);</span>
   <span class="o">});</span>
   <span class="n">onStop</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"stopping app"</span><span class="o">);</span>
   <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or via module:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">implements</span> <span class="n">Jooby</span><span class="o">.</span><span class="na">Module</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="n">configure</span><span class="o">(</span><span class="n">Env</span> <span class="n">env</span><span class="o">,</span> <span class="n">Config</span> <span class="n">conf</span><span class="o">,</span> <span class="n">Binder</span> <span class="n">binder</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">env</span><span class="o">.</span><span class="na">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"starting module"</span><span class="o">);</span>
    <span class="o">});</span>
    <span class="n">env</span><span class="o">.</span><span class="na">onStop</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"stopping module"</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Modules are covered later, all you need to know now is that you can start/stop module as you usually do with your application.</p> 
       <h4 id="application-callbacks-order">callbacks order</h4> 
       <p>Callback order is preserved:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
  <span class="o">});</span>

  <span class="n">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
  <span class="o">});</span>

  <span class="n">onStart</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"third"</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Order is useful for service dependencies, like ServiceB should be started after ServiceA.</p> 
       <h4 id="application-service-registry">service registry</h4> 
       <p>You have access to the the service registry, and are able to start or stop too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">onStart</span><span class="o">(</span><span class="n">registry</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">});</span>

  <span class="n">onStop</span><span class="o">(</span><span class="n">registry</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="application-PostConstruct-PreDestroy-annotations">PostConstruct/PreDestroy annotations</h4> 
       <p>If you prefer the annotation way… you can use annotations too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Singleton</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyService</span> <span class="o">{</span>

  <span class="nd">@PostConstruct</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">start</span><span class="o">()</span> <span class="o">{</span>
   <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="nd">@PreDestroy</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">stop</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

<span class="o">}</span>
<span class="n">App</span><span class="o">.</span><span class="na">java</span><span class="o">:</span>
<span class="o">{</span>
  <span class="n">lifeCycle</span><span class="o">(</span><span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>It works as expected, just make sure <code class="highlighter-rouge codehilite">MyService</code> is a <strong>Singleton</strong> object.</p> 
       <h3 id="application-logging">logging</h3> 
       <p>Logging is done via <a href="http://logback.qos.ch" target="_blank">logback</a>. Logback bootstrap and configuration is described here <a href="http://logback.qos.ch/manual/configuration.html" target="_blank">logback configuration</a></p> 
       <p>It is useful that we can bundle logging configuration files inside our <em>fat</em> jar, it works very well for small/simple apps.</p> 
       <p>For medium/complex apps and/or if you need/want to debug errors the configuration files should/must be outside the jar, so you can turn on/off loggers, change log level etc..</p> 
       <p>On such cases all you have to do is start the application with the location of the logback configuration file:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>java -Dlogback.configurationFile=logback.xml -jar myapp.jar
</code></pre> 
       </div> 
       <p>The <code class="highlighter-rouge codehilite">-Dlogback.configurationFile</code> property controls the configuration file to load. More information can be found <a href="http://logback.qos.ch/manual/configuration.html" target="_blank">here</a></p> 
      </div> 
     </div> 
     <div class="datalist" id="conf-env-and-logging"> 
      <div class="datalist-title "> 
       <h2>conf, env and logging</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Jooby delegates configuration management to <a href="https://github.com/typesafehub/config" target="_blank">config</a>. By defaults Jooby will attempt to load an <code class="highlighter-rouge codehilite">application.conf</code> file from root of classpath. Inside the file you can add/override any property you want.</p> 
       <h3 id="conf-env-and-logging-property-access">property access</h3> 
       <p>via script:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Config</span> <span class="n">conf</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">Config</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">myprop</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"myprop"</span><span class="o">);</span>
    <span class="o">...</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>or via <code class="highlighter-rouge codehilite">@Named</code> annotation:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="nd">@Inject</span>
  <span class="kd">public</span> <span class="n">Controller</span><span class="o">(</span><span class="nd">@Named</span><span class="o">(</span><span class="s">"myprop"</span><span class="o">)</span> <span class="n">String</span> <span class="n">myprop</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="conf-env-and-logging-type-conversion">type conversion</h4> 
       <p>Automatic type conversion is provided when a type:</p> 
       <p>1) Is a primitive, primitive wrapper or String</p> 
       <p>2) Is an enum</p> 
       <p>3) Has a public <strong>constructor</strong> that accepts a single <strong>String</strong> argument</p> 
       <p>4) Has a static method <strong>valueOf</strong> that accepts a single <strong>String</strong> argument</p> 
       <p>5) Has a static method <strong>fromString</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.util.UUID</code></p> 
       <p>6) Has a static method <strong>forName</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.nio.charset.Charset</code></p> 
       <p>7) There is custom <a href="https://github.com/google/guice" target="_blank">Guice</a> type converter for the type</p> 
       <p>It is also possible to inject the root <code class="highlighter-rouge codehilite">com.typesafe.config.Config</code> object or a child of it.</p> 
       <h3 id="conf-env-and-logging-application-env">application.env</h3> 
       <p>Jooby internals and also the module system rely on the <code class="highlighter-rouge codehilite">application.env</code> property. By defaults, this property is set to: <code class="highlighter-rouge codehilite">dev</code>.</p> 
       <p>This special property is represented at runtime with the <a href="/apidocs/org/jooby/Env.html" target="_blank">Env</a> class.</p> 
       <p>For example, the <a href="https://github.com/google/guice/wiki/Bootstrap" target="_blank">development stage</a> is set in <a href="https://github.com/google/guice" target="_blank">Guice</a> when <code class="highlighter-rouge codehilite">application.env == dev</code>.</p> 
       <p>A module provider, might decided to create a connection pool, cache, etc when <code class="highlighter-rouge codehilite">application.env != dev</code>.</p> 
       <h3 id="conf-env-and-logging-turn-on-off-features">turn on/off features</h3> 
       <p>As described before, the <code class="highlighter-rouge codehilite">application.env</code> property defines the environment where the application is being executed. It is possible to turn on/off specific features based on the application environment:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">on</span><span class="o">(</span><span class="s">"dev"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">DevModule</span><span class="o">());</span>
  <span class="o">});</span>

  <span class="n">on</span><span class="o">(</span><span class="s">"prod"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">ProdModule</span><span class="o">());</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>There is a complement operator: <code class="highlighter-rouge codehilite">.orElse</code> too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">on</span><span class="o">(</span><span class="s">"dev"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">DevModule</span><span class="o">());</span>
  <span class="o">}).</span><span class="na">orElse</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">ProdModule</span><span class="o">());</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The <code class="highlighter-rouge codehilite">env callback</code> can access to <code class="highlighter-rouge codehilite">config</code> object, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">on</span><span class="o">(</span><span class="s">"dev"</span><span class="o">,</span> <span class="n">conf</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">DevModule</span><span class="o">(</span><span class="n">conf</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"myprop"</span><span class="o">)));</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="conf-env-and-logging-special-properties">special properties</h3> 
       <h4 id="conf-env-and-logging-application-secret">application.secret</h4> 
       <p>If present, the session cookie will be signed with the <code class="highlighter-rouge codehilite">application.secret</code>.</p> 
       <h4 id="conf-env-and-logging-default-properties">default properties</h4> 
       <p>Here is the list of default properties provided by Jooby:</p> 
       <ul> 
        <li><strong>application.name</strong>: describes the name of your application. Default is: <em>app.getClass().getSimpleName()</em></li> 
        <li><strong>application.tmpdir</strong>: location of the temporary directory. Default is: <em>${java.io.tmpdir}/${application.name}</em></li> 
        <li><strong>application.charset</strong>: charset to use. Default is: <em>UTF-8</em></li> 
        <li><strong>application.lang</strong>: locale to use. Default is: <em>Locale.getDefault()</em>. A <code class="highlighter-rouge codehilite">java.util.Locale</code> can be injected.</li> 
        <li><strong>application.dateFormat</strong>: date format to use. Default is: <em>dd-MM-yyyy</em>. A <code class="highlighter-rouge codehilite">java.time.format.DateTimeFormatter</code> can be injected.</li> 
        <li><strong>application.numberFormat</strong>: number format to use. Default is: <em>DecimalFormat.getInstance(“application.lang”)</em></li> 
        <li><strong>application.tz</strong>: time zone to use. Default is: <em>ZoneId.systemDefault().getId()</em>. A <code class="highlighter-rouge codehilite">java.time.ZoneId</code> can be injected.</li> 
       </ul> 
       <h3 id="conf-env-and-logging-precedence">precedence</h3> 
       <p>Config files are loaded in the following order (first-listed are higher priority)</p> 
       <ul> 
        <li>system properties</li> 
        <li>arguments properties</li> 
        <li>(file://[application].[mode].[conf])?</li> 
        <li>(cp://[application].[mode].[conf])?</li> 
        <li>([application].[conf])?</li> 
        <li>[modules in reverse].[conf]*</li> 
       </ul> 
       <p>It looks kind of complex, right? It does, but at the same time it is very intuitive and makes a lot of sense. Let’s review why.</p> 
       <h4 id="conf-env-and-logging-system-properties">system properties</h4> 
       <p>System properties can override any other property. A sys property is set at startup time, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>java -Dapplication.env=prod -jar myapp.jar
</code></pre> 
       </div> 
       <h4 id="conf-env-and-logging-arguments-properties">arguments properties</h4> 
       <p>Arguments properties can override any other property. A argument property is set at startup time, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>java -jar myapp.jar application.env=prod
</code></pre> 
       </div> 
       <h4 id="conf-env-and-logging-file-application-mode-conf-">file://[application].[mode].[conf]</h4> 
       <p>The use of this conf file is optional, because Jooby recommend to deploy your application as a <strong>fat jar</strong> and all the properties files should be bundled inside the jar.</p> 
       <p>If you find this impractical, then this option is for you.</p> 
       <p>Let’s say your app includes a default property file: <code class="highlighter-rouge codehilite">application.conf</code> bundled with your <strong>fat jar</strong>. Now if you want/need to override two or more properties, just do this:</p> 
       <ul> 
        <li>find a directory to deploy your app</li> 
        <li>inside that directory create a file: <code class="highlighter-rouge codehilite">application.conf</code></li> 
        <li>start the app from same directory</li> 
       </ul> 
       <p>That’s all. The file system conf file will take precedence over the classpath config file, overriding any property.</p> 
       <p>A good practice is to start up your app with a <strong>env</strong>, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>java -jar myapp.jar prod
</code></pre> 
       </div> 
       <p>The process is the same, except this time you can name your file as:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>application.prod.conf
</code></pre> 
       </div> 
       <h4 id="conf-env-and-logging-cp-application-mode-conf-">cp://[application].[mode].[conf]</h4> 
       <p>Again, the use of this conf file is optional and works like previous config option, except here the <strong>fat jar</strong> was bundled with all your config files (dev, stage, prod, etc.)</p> 
       <p>Example: you have two config files: <code class="highlighter-rouge codehilite">application.conf</code> and <code class="highlighter-rouge codehilite">application.prod.conf</code>`. Both files were bundled inside the <strong>fat jar</strong>, starting the app in <strong>prod</strong> env:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>java -jar myapp.jar application.env=prod
</code></pre> 
       </div> 
       <p>So here the <code class="highlighter-rouge codehilite">application.prod.conf</code> will takes precedence over the <code class="highlighter-rouge codehilite">application.conf</code> conf file.</p> 
       <p>This is the recommended option from Jooby, because your app doesn’t have an external dependency. If you need to deploy the app in a new server all you need is your <strong>fat jar</strong></p> 
       <h4 id="conf-env-and-logging--application-conf-">[application].[conf]</h4> 
       <p>This is the default config file and it should be bundle inside the <strong>fat jar</strong>. As mentioned early, the default name is: <strong>application.conf</strong></p> 
       <h4 id="conf-env-and-logging--modules-in-reverse-conf-">[modules in reverse].[conf]</h4> 
       <p>As mentioned in the <a href="#modules">modules</a> section a module might define his own set of properties.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="err">use(new</span><span class="w"> </span><span class="err">M1());</span><span class="w"> </span><span class="err">use(new</span><span class="w"> </span><span class="err">M2());</span><span class="w"> </span><span class="p">}</span><span class="w"> </span></code></pre> 
       </div> 
       <p>In the previous example the M2 modules properties will take precedence over M1 properties.</p> 
       <p>The config system is very powerful and allow you to create a single distribution with different configuration per environment.</p> 
      </div> 
     </div> 
     <div class="datalist" id="modules"> 
      <div class="datalist-title "> 
       <h2>modules</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Modules are a key concept for building reusable and configurable piece of software.</p> 
       <p>Modules are thin and do a lot of work to bootstrap and configure the external library, but they <strong>don’t provide a new level of abstraction</strong> nor [do] they provide a custom API to access functionality in that library. Instead they expose the library components as they are</p> 
       <p>Modules like in <a href="https://github.com/google/guice" target="_blank">Guice</a> are used to wire services, connect data, etc…</p> 
       <p>There is an extensive <a href="/modules">module ecosystem</a> which makes Jooby a <strong>full stack</strong> framework (when need it).</p> 
       <h3 id="modules-do-less-and-be-flexible">do less and be flexible</h3> 
       <p><strong>Do less</strong> might sounds confusing, but is the key to flexibility.</p> 
       <p>A module should do as <strong>less as possible</strong> (key difference with other frameworks). A module for a library <em>X</em> should:</p> 
       <ul> 
        <li>Bootstrap X</li> 
        <li>Configure X</li> 
        <li>exports raw API of X</li> 
       </ul> 
       <p>This means a module should NOT create wrapper for a library. Instead, provides a way to extend, configure and use the raw library.</p> 
       <blockquote> 
        <p>This principle, keep module usually small, maintainable and flexible.</p> 
       </blockquote> 
       <h3 id="modules-creating-modules">creating modules</h3> 
       <p>A module is represented by the <a href="/apidocs/org/jooby/Jooby.Module.html" target="_blank">Jooby.Module</a> class. The configure callback looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">M1</span> <span class="kd">implements</span> <span class="n">Jooby</span><span class="o">.</span><span class="na">Module</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">configure</span><span class="o">(</span><span class="n">Env</span> <span class="n">env</span><span class="o">,</span> <span class="n">Config</span> <span class="n">conf</span><span class="o">,</span> <span class="n">Binder</span> <span class="n">binder</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">binder</span><span class="o">.</span><span class="na">bind</span><span class="o">(...).</span><span class="na">to</span><span class="o">(...);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The configure callback is similar to a <a href="https://github.com/google/guice" target="_blank">Guice module</a>, except you can access to the <a href="/apidocs/org/jooby/Env.html" target="_blank">Env</a> and <a href="https://github.com/typesafehub/config" target="_blank">config</a> objects.</p> 
       <h3 id="modules-module-properties">module properties</h3> 
       <p>In addition to the <strong>configure</strong> callback, a module in <a href="http://jooby.org">Jooby</a> has one additional method: <strong>config</strong>. The <code class="highlighter-rouge codehilite">config</code> method allows a module to set default properties.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">M1</span> <span class="kd">implements</span> <span class="n">Jooby</span><span class="o">.</span><span class="na">Module</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">configure</span><span class="o">(</span><span class="n">Env</span> <span class="n">env</span><span class="o">,</span> <span class="n">Config</span> <span class="n">config</span><span class="o">,</span> <span class="n">Binder</span> <span class="n">binder</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">binder</span><span class="o">.</span><span class="na">bind</span><span class="o">(...).</span><span class="na">to</span><span class="o">(...);</span>
    <span class="o">}</span>

   <span class="kd">public</span> <span class="n">Config</span> <span class="n">config</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="n">Config</span><span class="o">.</span><span class="na">parseResources</span><span class="o">(</span><span class="n">getClass</span><span class="o">(),</span> <span class="s">"m1.properties"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="modules-usage">usage</h3> 
       <p>A module is registered at startup time:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.jooby.Jooby</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span>

  <span class="o">{</span>
     <span class="c1">// as lambda</span>
     <span class="n">use</span><span class="o">((</span><span class="n">env</span><span class="o">,</span> <span class="n">config</span><span class="o">,</span> <span class="n">binder</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">binder</span><span class="o">.</span><span class="na">bind</span><span class="o">(...).</span><span class="na">to</span><span class="o">(...);</span>
     <span class="o">});</span>
     <span class="c1">// as instance</span>
     <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">M1</span><span class="o">());</span>
     <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">M2</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="routes"> 
      <div class="datalist-title "> 
       <h2>routes</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>A route describes the interface for making requests to your web app. It combines a HTTP method (a.k.a. HTTP verb) and a path pattern.</p> 
       <p>A route has an associated handler, which does some job and produces some kind of output (HTTP response).</p> 
       <h3 id="routes-creating-routes">creating routes</h3> 
       <p>A route definition looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>We created a route to handle GET request at the root of our app. Any other HTTP method can be created in the same way.</p> 
       <p>If you need a POST all you have to do is:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>or need to listen to any HTTP method:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>It is possible to name a route explicitly:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">)</span>
   <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"salute"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>Default route name is <strong>anonymous</strong>. Naming a route is useful for debugging purpose, specially if you have two or more routes mounted on the same path.</p> 
       <h3 id="routes-route-handler">route handler</h3> 
       <p>Jooby offers serveral flavors for creating routes:</p> 
       <h4 id="routes-no-arg-handler-">no arg handler: ()</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <h4 id="routes-one-arg-handler-req">one arg handler: req</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <h4 id="routes-two-args-handler-req-rsp-">two args handler: (req, rsp)</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"hey jooby"</span><span class="o">));</span>
</code></pre> 
       </div> 
       <h4 id="routes-filter-req-rsp-chain-">filter: (req, rsp, chain)</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="c1">// do something</span>
  <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="routes-path-patterns">path patterns</h3> 
       <h4 id="routes-static-patterns">static patterns</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/help"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/mail/inbox"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <h4 id="routes-var-regex-patterns">var/regex patterns</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/user/:id"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey "</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">value</span><span class="o">());</span>

<span class="c1">// alternative syntax</span>
<span class="n">get</span><span class="o">(</span><span class="s">"/user/{id}"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey "</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">value</span><span class="o">());</span>

<span class="c1">// matches path element with prefix "uid"</span>
<span class="n">get</span><span class="o">(</span><span class="s">"/user/uid{id}"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey "</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">value</span><span class="o">());</span>

<span class="c1">// regex</span>
<span class="n">get</span><span class="o">(</span><span class="s">"/user/{id:\\d+}"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey "</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">intValue</span><span class="o">());</span>
</code></pre> 
       </div> 
       <p>Request params are covered later, for now all you need to know is that you can access to a path parameter using the <a href="/apidocs/org/jooby/Request.html#param(java.lang.String)" target="_blank">Request.param(String)</a>.</p> 
       <h4 id="routes-ant-style-patterns">ant style patterns</h4> 
       <p><code class="highlighter-rouge codehilite">com/t?st.html</code> - matches <code class="highlighter-rouge codehilite">com/test.html</code> but also <code class="highlighter-rouge codehilite">com/tast.html</code> and <code class="highlighter-rouge codehilite">com/txst.html</code></p> 
       <p><code class="highlighter-rouge codehilite">com/*.html</code> - matches all <code class="highlighter-rouge codehilite">.html</code> files in the <code class="highlighter-rouge codehilite">com</code> directory</p> 
       <p><code class="highlighter-rouge codehilite">com/**/test.html</code> - matches all <code class="highlighter-rouge codehilite">test.html</code> files underneath the <code class="highlighter-rouge codehilite">com</code> path</p> 
       <p><code class="highlighter-rouge codehilite">**</code> - matches any path at any level</p> 
       <p><code class="highlighter-rouge codehilite">*</code> - matches any path at any level, shortcut for <code class="highlighter-rouge codehilite">**</code></p> 
       <p><code class="highlighter-rouge codehilite">**:name</code> or <code class="highlighter-rouge codehilite"><span class="p">{</span><span class="err">name:**</span><span class="p">}</span></code> - matches any path at any level and binds the match to the request parameter <code class="highlighter-rouge codehilite">name</code></p> 
       <h3 id="routes-static-files">static files</h3> 
       <p>Static files are located inside the <code class="highlighter-rouge codehilite">public</code> directory.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>├── public
    ├── assets
    |   ├── js
    |   |   └── index.js
    |   ├── css
    |   |   └── style.css
    |   └── images
    |       └── logo.png
    └── welcome.html
</code></pre> 
       </div> 
       <p>Let’s add an asset handler:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">assets</span><span class="o">(</span><span class="s">"/assets/**"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The asset route handler resolves requests like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>GET /assets/js/index.js
GET /assets/css/style.css
</code></pre> 
       </div> 
       <p>It is possible to map a single static file to a path:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">assets</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="s">"welcome.html"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A <code class="highlighter-rouge codehilite">GET /</code> will display the static file <code class="highlighter-rouge codehilite">welcome.html</code>.</p> 
       <p>Here is another example that uses <a href="http://www.webjars.org" target="_blank">webjars</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">assets</span><span class="o">(</span><span class="s">"/assets/**"</span><span class="o">,</span> <span class="s">"/META-INF/resources/webjars/{0}"</span><span class="o">);</span>

  <span class="n">assets</span><span class="o">(</span><span class="s">"/assets/**"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>and responds to the following requests:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>GET /assets/jquery/2.1.3/jquery.js
GET /assets/bootstrap/3.3.4/css/bootstrap.css
</code></pre> 
       </div> 
       <p>but also to any other application specific resource:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>GET /assets/js/index.js
GET /assets/css/style.css
</code></pre> 
       </div> 
       <h4 id="routes-using-a-CDN">using a CDN</h4> 
       <p>The asset handler goes one step forward and add support for serving files from a <code class="highlighter-rouge codehilite">CDN</code> out of the box. All you have to do is to define a <code class="highlighter-rouge codehilite">assets.cdn</code> property:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="c"># application.prod.properties </span>
<span class="py">assets.cdn</span> <span class="p">=</span> <span class="s">"http://http://d7471vfo50fqt.cloudfront.net"</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">assets</span><span class="o">(</span><span class="s">"/assets/**"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A <code class="highlighter-rouge codehilite">GET</code> to <code class="highlighter-rouge codehilite">/assets/js/index.js</code> will be redirected to: <code class="highlighter-rouge codehilite">http://http://d7471vfo50fqt.cloudfront.net/assets/js/index.js</code></p> 
       <p>Of course, you usually set a <code class="highlighter-rouge codehilite">cdn</code> in your <code class="highlighter-rouge codehilite">application.prod.conf</code> file only.</p> 
       <h4 id="routes-assets-module">assets module</h4> 
       <p>There is also a super awesome and powerful <a href="/doc/assets/">assets</a> module. The <a href="/doc/assets/">assets</a> is library to validate, concatenate, minify or compress JavaScript and CSS assets.</p> 
       <h3 id="routes-precedence-and-order">precedence and order</h3> 
       <p>Routes are executed in the order they are defined. So the ordering of routes is crucial to the behavior of an application. Let’s review this fact via some examples.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"first"</span><span class="o">);</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"second"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>A call to <code class="highlighter-rouge codehilite">/abc</code> produces a response of <code class="highlighter-rouge codehilite">first</code>. If we revert the order:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"second"</span><span class="o">);</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"first"</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>It produces a response of <code class="highlighter-rouge codehilite">second</code>.</p> 
       <blockquote> 
        <p>As you can see <strong>ORDER IS SUPER IMPORTANT</strong>.</p> 
       </blockquote> 
       <p>Now, why is it allowed to have two routes for the same path?</p> 
       <p>Because we want <strong>filters</strong> for routes.</p> 
       <p>A route handler accept a third parameter, commonly named chain, which refers to the next route handler in line:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
  <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/abc"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Again the order of route definition is super important. Forgetting this will cause your app behave unpredictably. We will learn more about this behavior in the examples of the next section.</p> 
       <h3 id="routes-request-handling">request handling</h3> 
       <p>When a request is made to the server, which matches a route definition, the associated callback functions kick in to process the request and send back a response. We call this route pipe or stack.</p> 
       <p>Routes are like a plumbing pipe, requests start at the first route you define and work their way “down” the route stack processing for each path they match.</p> 
       <p>Each route handler has the capability to send a response or pass on the request to the next route handler in the current stack.</p> 
       <p>Route handlers, also have access to the chain object, which happens to be the next callback function in the pipe. To make the chain object available to the callback function, pass it along with the req and the rsp objects to it:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>If there is no matching callback function after the current callback function, next refers to the built-in 404 error handler, and it will be triggered when you call it.</p> 
       <p>Try to guess the output of:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"first"</span><span class="o">));</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"second"</span><span class="o">));</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"third"</span><span class="o">));</span>
</code></pre> 
       </div> 
       <p>Will the server print all of them, or “first” or, “third”?</p> 
       <p>The server will print just “first”. The act of doing a <code class="highlighter-rouge codehilite">rsp.send()</code> terminates the flow of the request then and there; the request is not passed on to any other route handler.</p> 
       <p>So, how do we specify multiple handlers for a route, and use them all at the same time? Call the <strong>chain.next()</strong> function from the callback, without calling <strong>send</strong> because it terminates the request flow. Here is an example:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
  <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
  <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
<span class="o">});</span>


<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"third"</span><span class="o">);</span>
<span class="o">});</span>

</code></pre> 
       </div> 
       <p>Alternative, if you <em>always</em> call <strong>chain.next</strong> you can just do:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
<span class="o">});</span>


<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"third"</span><span class="o">);</span>
<span class="o">});</span>

</code></pre> 
       </div> 
       <p>The 3rd arg is required if you need to decide if the next route need to be executed or not. If you always call <strong>chain.next</strong> the 3rd arg isn’t required and does exactly what the 2arg handler does: <strong>always call chain.next</strong></p> 
       <p>A good example for a filter is to handle for example authentication:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// It is OK</span>
    <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">Route</span><span class="o">.</span><span class="na">Err</span><span class="o">(</span><span class="mi">403</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="routes-interceptors">interceptors</h3> 
       <p>An interceptor allows to customize a HTTP request and response at three stages:</p> 
       <ul> 
        <li>before the actual handler is invoked</li> 
        <li>after the handler was executed, but before we send the response</li> 
        <li>after a response was send</li> 
       </ul> 
       <h4 id="routes-before">before</h4> 
       <p>Allows for customized handler execution chains. It will be invoked before the actual handler.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">before</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>You are allowed to modify the request and response objects. Please note that the <code class="highlighter-rouge codehilite">before</code> handler is just syntax sugar for <a href="/apidocs/org/jooby/Route.Filter.html" target="_blank">Route.Filter</a>. For example, the <code class="highlighter-rouge codehilite">before</code> handler was implemented as:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">before</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
    <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A <code class="highlighter-rouge codehilite">before</code> handler must to be registered before the actual handler you want to intercept.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">before</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
  <span class="o">});</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
    <span class="k">return</span> <span class="o">...;</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>If you reverse the order then it won’t work.</p> 
       <blockquote> 
        <p><strong>Remember</strong>: routes are executed in the order they are defined and the pipeline is executed as long you don’t generate a response.</p> 
       </blockquote> 
       <h4 id="routes-after">after</h4> 
       <p>Allows for customized response before sending it. It will be invoked at the time a response need to be send.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">after</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">result</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>You are allowed to modify the request, response and result objects. The handler returns a <a href="/apidocs/org/jooby/Result.html" target="_blank">Result</a> which can be the same or an entirely new <a href="/apidocs/org/jooby/Result.html" target="_blank">Result</a>. Please note that the <code class="highlighter-rouge codehilite">after</code> handler is just syntax sugar for <a href="/apidocs/org/jooby/Route.Filter.html" target="_blank">Route.Filter</a>. For example, the <code class="highlighter-rouge codehilite">after</code> handler was implemented as:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="k">new</span> <span class="n">Response</span><span class="o">.</span><span class="na">Forwarding</span><span class="o">(</span><span class="n">rsp</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="n">send</span><span class="o">(</span><span class="n">Result</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">after</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">});</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Due <code class="highlighter-rouge codehilite">after</code> is implemented by wrapping the {@link Response} object. A <code class="highlighter-rouge codehilite">after</code> handler must to be registered before the actual handler you want to intercept.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">after</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">result</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">});</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>If you reverse the order then it won’t work.</p> 
       <blockquote> 
        <p><strong>Remember</strong>: routes are executed in the order they are defined and the pipeline is executed as long you don’t generate a response.</p> 
       </blockquote> 
       <h4 id="routes-complete">complete</h4> 
       <p>Allows for log and cleanup a request. It will be invoked after we send a response.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">complete</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">cause</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>You are NOT allowed to modify the request and response objects. The <code class="highlighter-rouge codehilite">cause</code> is an <code class="highlighter-rouge codehilite">Optional</code> with a <code class="highlighter-rouge codehilite">Throwable</code> useful to identify problems. The goal of the <code class="highlighter-rouge codehilite">complete</code> handler is to probably cleanup request object and log responses. Please note that the <code class="highlighter-rouge codehilite">complete</code> handler is just syntax sugar for <a href="/apidocs/org/jooby/Route.Filter.html" target="_blank">Route.Filter</a>. For example, the <code class="highlighter-rouge codehilite">complete</code> handler was implemented as:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Throwable</span><span class="o">&gt;</span> <span class="n">err</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">err</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">cause</span><span class="o">);</span>
      <span class="k">throw</span> <span class="n">cause</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">complete</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A <code class="highlighter-rouge codehilite">complete</code> handler must to be registered before the actual handler you want to intercept.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">complete</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">cause</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// your code goes here</span>
  <span class="o">});</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>If you reverse the order then it won’t work.</p> 
       <blockquote> 
        <p><strong>Remember</strong>: routes are executed in the order they are defined and the pipeline is executed as long you don’t generate a response.</p> 
       </blockquote> 
       <h4 id="routes-example">example</h4> 
       <p>Suppose you have a transactional resource, like a database connection. The next example shows you how to implement a simple and effective <code class="highlighter-rouge codehilite">transaction-per-request</code> pattern:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="c1">// start transaction</span>
  <span class="n">before</span><span class="o">(</span><span class="s">"/api/*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">DataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DataSource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
    <span class="n">Transaction</span> <span class="n">trx</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
    <span class="n">trx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="n">req</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"connection"</span><span class="o">,</span> <span class="n">connection</span><span class="o">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">});</span>

  <span class="c1">// commit/rollback transaction</span>
  <span class="n">complete</span><span class="o">(</span><span class="s">"/api/*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">cause</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// unbind connection from request</span>
    <span class="k">try</span><span class="o">(</span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">unset</span><span class="o">(</span><span class="s">"connection"</span><span class="o">).</span><span class="na">get</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">Transaction</span> <span class="n">trx</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">cause</span><span class="o">.</span><span class="na">ifPresent</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">trx</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">trx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">});</span>

  <span class="c1">// your transactional routes goes here</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/api/something"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"connection"</span><span class="o">);</span>
    <span class="c1">// work with connection</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="routes-mvc-routes">mvc routes</h3> 
       <p>Mvc routes are like <strong>controllers</strong> in <a href="http://spring.io" target="_blank">Spring</a> and/or <strong>resources</strong> in <a href="https://jersey.java.net/" target="_blank">Jersey</a> with some minor enhancements and/or simplifications.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Path</span><span class="o">(</span><span class="s">"/routes"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRoutes</span> <span class="o">{</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Result</span> <span class="n">home</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"home"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"model"</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Annotations are identical to <a href="https://jersey.java.net/" target="_blank">Jersey/JAX-RS</a> and they can be found under the package <strong>org.jooby.mvc</strong>.</p> 
       <p>Keep in mind, Jooby doesn’t implement the <strong>JAX-RS</strong> spec that is why it has his own version of the annotations.</p> 
       <p>A mvc route can be injected by Guice:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Path</span><span class="o">(</span><span class="s">"/routes"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRoutes</span> <span class="o">{</span>

  <span class="nd">@Inject</span>
  <span class="kd">public</span> <span class="n">MyRoutes</span><span class="o">(</span><span class="n">DepA</span> <span class="n">a</span><span class="o">,</span> <span class="n">DepB</span><span class="o">)</span> <span class="o">{</span>
   <span class="o">...</span>
  <span class="o">}</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Result</span> <span class="n">home</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"home"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"model"</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A method annotated with <a href="/apidocs/org/jooby/mvc/GET.html" target="_blank">GET</a>, <a href="/apidocs/org/jooby/mvc/POST.html" target="_blank">POST</a>,…, is considered a route handler (web method).</p> 
       <h4 id="routes-registering-a-mvc-route">registering a mvc route</h4> 
       <p>Mvc routes must be registered, there is <strong>no auto-discover</strong> feature (and it won’t be), no classpath scanning, …, etc.</p> 
       <p>The order in which you define your routes has a huge importance and it defines how your app will work. This is one of the reason why mvc routes need to be explicitly registered. The other reason is bootstrap time, declaring the route explicitly helps to reduce bootstrap time.</p> 
       <p>So, how do I register a mvc route?</p> 
       <p>In the same way everything else is registered in Jooby!! from your app class:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span>
  <span class="o">{</span>
     <span class="n">use</span><span class="o">(</span><span class="n">MyRoutes</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Again, handlers are registered in the order they are declared, so:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Path</span><span class="o">(</span><span class="s">"/routes"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRoutes</span> <span class="o">{</span>
  
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">first</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">second</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">third</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="s">"third"</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A call to <code class="highlighter-rouge codehilite">/routes</code> will print: <strong>first</strong>, <strong>second</strong> and produces a response of <strong>third</strong>.</p> 
       <h4 id="routes-binding-req-params">binding req params</h4> 
       <p>A mvc handler can be bound to request parameters:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="n">String</span> <span class="n">q</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">searcher</span><span class="o">.</span><span class="na">doSearch</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <p>Here <strong>q</strong> can be any of the available param types and it will resolved as described in the <a href="#request-request-params">request params</a> section.</p> 
       <p>Optional params work in the same way, all you have to do is to declare the param as <code class="highlighter-rouge codehilite">java.util.Optional</code>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">q</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">searcher</span><span class="o">.</span><span class="na">doSearch</span><span class="o">(</span><span class="n">q</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">"*:*"</span><span class="o">));</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <p>Multi-value params work in the same way, all you have to do is to declare the param as <code class="highlighter-rouge codehilite">java.util.List</code>, <code class="highlighter-rouge codehilite">java.util.Set</code> or <code class="highlighter-rouge codehilite">java.util.SortedSet</code>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">q</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">searcher</span><span class="o">.</span><span class="na">doSearch</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <p>Just remember the injected collection is immutable.</p> 
       <p>File uploads (again) work in the same way, just use <code class="highlighter-rouge codehilite">org.jooby.Upload</code></p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@POST</span>
   <span class="kd">public</span> <span class="n">View</span> <span class="n">search</span><span class="o">(</span><span class="n">Upload</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span> <span class="k">do</span> <span class="n">something</span> <span class="n">with</span> <span class="n">the</span> <span class="n">uploaded</span> <span class="n">file</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <p>As you might already noticed, Jooby uses the method param name and bind it to the request param. If you want explicit mapping and/or the req param isn’t a valid Java identifier:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="nd">@Named</span><span class="o">(</span><span class="s">"req-param"</span><span class="o">)</span> <span class="n">String</span> <span class="n">reqParam</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-binding-req-body">binding req body</h4> 
       <p>Injecting a req body work in the same way:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>  <span class="nd">@POST</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="n">search</span><span class="o">(</span><span class="nd">@Body</span> <span class="n">MyObject</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">...</span> <span class="k">do</span> <span class="n">something</span> <span class="n">with</span> <span class="n">my</span> <span class="n">object</span>
  <span class="o">}</span>
</code></pre> 
       </div> 
       <p>All you have to do is add the <code class="highlighter-rouge codehilite">@Body</code> annotation.</p> 
       <h4 id="routes-binding-req-headers">binding req headers</h4> 
       <p>Works just like <a href="#routes-binding-req-params">req params</a> but you must annotated the param with <em>org.jooby.mvc.Header</em>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="nd">@Header</span> <span class="n">String</span> <span class="n">myHeader</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or, if the header name isn’t a valid Java identifier</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="nd">@GET</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="nd">@Header</span><span class="o">(</span><span class="s">"Last-Modified-Since"</span><span class="o">)</span> <span class="kt">long</span> <span class="n">lastModifedSince</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
   <span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-mvc-response">mvc response</h4> 
       <p>A web method might or might not send a response to the client. Some examples:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="nd">@GET</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">sayHi</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// OK(200)</span>
  <span class="k">return</span> <span class="s">"Hi "</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@GET</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">dontSayGoodbye</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// NO_CONTENT(204)</span>
  <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">noContent</span><span class="o">();</span>
<span class="o">}</span>

</code></pre> 
       </div> 
       <p>If you need/want to render a view, just return a <em>org.jooby.View</em> instance:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@GET</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">home</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"home"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"model"</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h5>customizing the response</h5> 
       <p>If you need to deal with HTTP metadata like: status code, headers, etc… use a <a href="/apidocs/org/jooby/Result.html" target="_blank">org.jooby.Result</a></p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@GET</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">handler</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// 201 = created</span>
  <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="mi">201</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="routes-dynamic-advanced-routing">dynamic / advanced routing</h3> 
       <p>Suppose you need to serve different content based on hostname. For example <code class="highlighter-rouge codehilite">admin.foo.com</code> serves on <code class="highlighter-rouge codehilite">/</code> something different than <code class="highlighter-rouge codehilite">www.foo.com</code>. Even there is different logic how to use it.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
   <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
       <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/admin"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
     <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
       <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/normal"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
     <span class="o">}</span>
   <span class="o">});</span>

   <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"Hello admin"</span><span class="o">).</span><span class="na">name</span><span class="o">(</span><span class="s">"admin"</span><span class="o">);</span>

   <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"Hello user"</span><span class="o">).</span><span class="na">name</span><span class="o">(</span><span class="s">"normal"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>We start by adding a filter:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
       <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/admin"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
     <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
       <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/normal"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
     <span class="o">}</span>
   <span class="o">});</span>
</code></pre> 
       </div> 
       <p>Here we make some decision and ask chain to move next by applying a filter: <code class="highlighter-rouge codehilite">/admin</code> or <code class="highlighter-rouge codehilite">/normal</code>. The chain will filter and keep all the routes where name starts with the given prefix.</p> 
       <p>It is possible to group routes by features and set the name globally:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">get</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="s">"Hello admin"</span><span class="o">)</span>
    <span class="o">...</span>
    <span class="c1">// apply name to all routes</span>
    <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"admin"</span><span class="o">);</span>

  <span class="n">use</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">get</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="s">"Hello user"</span><span class="o">)</span>
    <span class="o">...</span>
    <span class="c1">// apply name to all routes</span>
    <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"normal"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or group routes by features in their own app and then merge them into the main app:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Admin</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">Admin</span><span class="o">(</span><span class="n">String</span> <span class="n">prefix</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">prefix</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="o">{</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"Hello admin"</span><span class="o">);</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Normal</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">Normal</span><span class="o">(</span><span class="n">String</span> <span class="n">prefix</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">prefix</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="o">{</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"Hello user"</span><span class="o">);</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**</span>
 <span class="cm">* merge everything .</span>
 <span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="n">Jooby</span> <span class="o">{</span>
  <span class="o">{</span>
     <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
       <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
         <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/admin"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
       <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
         <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">"/normal"</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
       <span class="o">}</span>
     <span class="o">});</span>

     <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">Admin</span><span class="o">(</span><span class="s">"admin"</span><span class="o">));</span>
     <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">Normal</span><span class="o">(</span><span class="s">"normal"</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A call to <code class="highlighter-rouge codehilite">Jooby(String)</code> will prepend the given prefix to all the routes defined by the application.</p> 
       <p>As you can see routes and routing in <a href="http://jooby.org">Jooby</a> are very powerful!</p> 
       <h3 id="routes-properties">properties</h3> 
       <p>Routes have a few properties that let you extend basic functionality in one way or another including:</p> 
       <ul> 
        <li>attributes</li> 
        <li>with, map and excludes operators</li> 
        <li>consumes/produces types.</li> 
       </ul> 
       <h4 id="routes-attributes">attributes</h4> 
       <p>Attributes let you annotated a route at application bootstrap time. It is like static metadata available at runtime:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="o">..)</span>
    <span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>An attribute consist of a name and value. Allowed values are <code class="highlighter-rouge codehilite">primitives</code>, <code class="highlighter-rouge codehilite">String</code>, <code class="highlighter-rouge codehilite">enum</code>, <code class="highlighter-rouge codehilite">class</code> or an <code class="highlighter-rouge codehilite">array</code> of previous types.</p> 
       <p>Attributes can be accessed at runtime in a request/response cycle. For example, a security module might check for <code class="highlighter-rouge codehilite">role</code> attribute, a sitemap generator might check for <code class="highlighter-rouge codehilite">priority</code> attribute, etc…</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">chain</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="o">...;</span>
    <span class="n">String</span> <span class="n">role</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">route</span><span class="o">().</span><span class="na">attr</span><span class="o">(</span><span class="s">"role"</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">role</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">chain</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">Err</span><span class="o">(</span><span class="mi">403</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>In MVC routes you can set attributes for all the web methods:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
   <span class="n">use</span><span class="o">(</span><span class="n">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
     <span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or via <code class="highlighter-rouge codehilite">annotations</code>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Target</span><span class="o">({</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">,</span> <span class="n">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">ElementType</span><span class="o">.</span><span class="na">ANNOTATION_TYPE</span> <span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nd">@interface</span> <span class="n">Role</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">value</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Path</span><span class="o">(</span><span class="s">"/path"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdminResource</span> <span class="o">{</span>

  <span class="nd">@Role</span><span class="o">(</span><span class="s">"admin"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="n">doSomething</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">req</span><span class="o">.</span><span class="na">route</span><span class="o">().</span><span class="na">attributes</span><span class="o">())</span>
  <span class="o">});</span>
<span class="o">}</span>

</code></pre> 
       </div> 
       <p>The previous example will print: <code class="highlighter-rouge codehilite"><span class="p">{</span><span class="err">role</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">admin</span><span class="p">}</span></code>.</p> 
       <p>Any runtime annotations are automatically added as route attributes. Following these rules:</p> 
       <ul> 
        <li>If the annotation has a <code class="highlighter-rouge codehilite">value</code> method, then we use the annotation’s name as attribute name.</li> 
        <li>Otherwise, we use the method name as attribute name.</li> 
       </ul> 
       <blockquote> 
        <p><strong>request attributes vs route attributes:</strong></p> 
        <p>Route attributes are created at bootstrap time they are global and once you set they won’t change.</p> 
        <p>While, request attributes are created in a request/response cycle.</p> 
       </blockquote> 
       <h4 id="routes-with-operator">with operator</h4> 
       <p>The with operator set attributes, consumes and produces types, exclusions, etc.. to one or more routes:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">with</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">get</span><span class="o">(</span><span class="s">"/admin/1"</span><span class="o">,</span> <span class="o">...);</span>

    <span class="n">get</span><span class="o">(</span><span class="s">"/admin/2"</span><span class="o">,</span> <span class="o">...);</span>

  <span class="o">}).</span><span class="na">attr</span><span class="o">(</span><span class="s">"role"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-map-operator">map operator</h4> 
       <p>The map operator converts a route output to something else</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="c1">// we got bar.. not foo</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/foo"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"foo"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">value</span> <span class="o">-&gt;</span> <span class="s">"bar"</span><span class="o">);</span>

  <span class="c1">// we got foo.. not bar</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/bar"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"bar"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">value</span> <span class="o">-&gt;</span> <span class="s">"foo"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>If you want to apply a single map to several routes:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">with</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/foo"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"foo"</span><span class="o">);</span>

    <span class="n">get</span><span class="o">(</span><span class="s">"/bar"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"bar"</span><span class="o">);</span>

  <span class="o">}).</span><span class="na">map</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="s">"foo or bar"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>You can apply a <a href="/apidocs/org/jooby/Route.Mapper.html" target="_blank">Mapper</a> to specific types:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">with</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/str"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"str"</span><span class="o">);</span>

    <span class="n">get</span><span class="o">(</span><span class="s">"/int"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">);</span>

  <span class="o">}).</span><span class="na">map</span><span class="o">(</span><span class="n">String</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="s">"{"</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="s">"}"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A call to <code class="highlighter-rouge codehilite">/str</code> produces <code class="highlighter-rouge codehilite"><span class="p">{</span><span class="err">str</span><span class="p">}</span></code>, while <code class="highlighter-rouge codehilite">/int</code> just <code class="highlighter-rouge codehilite">1</code>.</p> 
       <blockquote> 
        <p><strong>NOTE</strong>: You can apply the map operator to routes that produces an output.</p> 
       </blockquote> 
       <p>For example, the map operator will be silently ignored here:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(...);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-excludes">excludes</h4> 
       <p>The excludes operator skip/ignore a route path match:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
   <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="c1">// all except /login</span>
   <span class="o">}).</span><span class="na">excludes</span><span class="o">(</span><span class="s">"/login"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-consumes">consumes</h4> 
       <p>The consumes operator indicates the expected input the route can handle. It is used will accepting requests.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">MyObject</span> <span class="n">json</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="o">}).</span><span class="na">consumes</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="routes-produces">produces</h4> 
       <p>The produces operator indicates the expected output the route can produces.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">MyObject</span><span class="o">();</span>
  <span class="o">}).</span><span class="na">produces</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="request"> 
      <div class="datalist-title "> 
       <h2>request</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>The request object contains methods for reading params, headers and body (between others). In the next section we will mention the most important method of a request object, if you need more information please refer to the <a href="/apidocs/org/jooby/Request.html" target="_blank">javadoc</a>.</p> 
       <h3 id="request-params">params</h3> 
       <p>Retrieval of param is done via: <a href="/apidocs/org/jooby/Request.html#param-java.lang.String-" target="_blank">req.param(“name”)</a> method.</p> 
       <p>The <a href="/apidocs/org/jooby/Request.html#param-java.lang.String-" target="_blank">req.param(“name”)</a> <strong>always</strong> returns a <a href="/apidocs/org/jooby/Mutant.html" target="_blank">Mutant</a> instance. A mutant had severals utility methods for doing type conversion.</p> 
       <p>Some examples:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">iparam</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"intparam"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>

  <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"str"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"object"</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// file upload</span>
  <span class="n">Upload</span> <span class="n">upload</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"file"</span><span class="o">).</span><span class="na">toUpload</span><span class="o">();</span>

  <span class="c1">// multi value params</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"strList"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">listObj</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"objList"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">Set</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">setObj</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"objList"</span><span class="o">).</span><span class="na">toSet</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// optional params</span>
  <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optStr</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"optional"</span><span class="o">).</span><span class="na">toOptional</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Multiple params can be retrieved at once:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>GET /search?name=John&amp;age=99&amp;address[country]=AR&amp;address[city]=BA
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Profile</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

  <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>

<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">country</span><span class="o">;</span>
  <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/search"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="n">Profile</span> <span class="n">profile</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">params</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">Profile</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">profile</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span> <span class="c1">// print John</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">profile</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span> <span class="c1">// print 99</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">profile</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span> <span class="c1">// print 99</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Binding is done at <code class="highlighter-rouge codehilite">field</code> level (no need of getter/setters). Field should not be <code class="highlighter-rouge codehilite">static</code>, <code class="highlighter-rouge codehilite">transient</code> or <code class="highlighter-rouge codehilite">final</code>. Also root or embedded classes must have a <code class="highlighter-rouge codehilite">default constructor</code>.</p> 
       <h4 id="request-param-types-and-precedence">param types and precedence</h4> 
       <p>A request param can be present at:</p> 
       <p>1) path: GET <em>/user/:id</em></p> 
       <p>2) query: GET <em>/user?id=…</em></p> 
       <p>3) body: POST to <em>/user</em> as <em>formurlenconded</em> or <em>multipart</em></p> 
       <p>(first listed are higher precedence)</p> 
       <p>Now, let’s suppose a very poor API where we have a route handler that accept an <strong>id</strong> param in the 3 forms:</p> 
       <p>A call like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>curl -X POST -d <span class="s2">"id=third"</span> http://localhost:8080/user/first?id<span class="o">=</span>second
</code></pre> 
       </div> 
       <p>Produces:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/user/:id"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="c1">// path param at idx = 0</span>
  <span class="n">assertEquals</span><span class="o">(</span><span class="s">"first"</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">value</span><span class="o">());</span>
  <span class="n">assertEquals</span><span class="o">(</span><span class="s">"first"</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>

  <span class="c1">// query param at idx = 1</span>
  <span class="n">assertEquals</span><span class="o">(</span><span class="s">"second"</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>

  <span class="c1">// body param at idx = 2</span>
  <span class="n">assertEquals</span><span class="o">(</span><span class="s">"third"</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>It is clear that an API like this should be avoided.</p> 
       <h4 id="request-param-type-conversion">param type conversion</h4> 
       <p>Automatic type conversion is provided when a type:</p> 
       <ul> 
        <li>Is a primitive, primitive wrapper or String</li> 
        <li>Is an enum</li> 
        <li>Is an <a href="/apidocs/org/jooby/Upload.html" target="_blank">Upload</a></li> 
        <li>Has a public <strong>constructor</strong> that accepts a single <strong>String</strong> argument</li> 
        <li>Has a static method <strong>valueOf</strong> that accepts a single <strong>String</strong> argument</li> 
        <li>Has a static method <strong>fromString</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.util.UUID</code></li> 
        <li>Has a static method <strong>forName</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.nio.charset.Charset</code></li> 
        <li>It is an Optional 
         <t>
           , List 
          <t>
            , Set 
           <t>
             or SortedSet 
            <t>
              where T satisfies one of previous rules 
            </t> 
           </t> 
          </t> 
         </t></li> 
       </ul> 
       <p>Custom type conversion is also possible:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">parser</span><span class="o">((</span><span class="n">type</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">getRawType</span><span class="o">()</span> <span class="o">==</span> <span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// convert the type here</span>
    <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="n">values</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">MyType</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="c1">// no luck! move to next converter</span>
  <span class="k">return</span> <span class="n">next</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">MyType</span> <span class="n">myType</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"value"</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="request-headers">headers</h3> 
       <p>Retrieval of request headers is done via: <a href="{{}}Request.html#header-java.lang.String-">request.header(“name”)</a>. All the explained before for <a href="#request-request-params">request params</a> apply for headers too.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">iparam</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"intparam"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>

  <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"str"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"object"</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// file upload</span>
  <span class="n">Upload</span> <span class="n">upload</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"file"</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">Upload</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// multi value params</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"strList"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">listObj</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"objList"</span><span class="o">).</span><span class="na">toList</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// custom object type using type conversion</span>
  <span class="n">Set</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">setObj</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"objList"</span><span class="o">).</span><span class="na">toSet</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="c1">// optional params</span>
  <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optStr</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"optional"</span><span class="o">).</span><span class="na">toOptional</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="request-body">body</h3> 
       <p>Retrieval of request body is done via <a href="/apidocs/org/jooby/Request.html#body--" target="_blank">request.body()</a>.</p> 
       <p>A <a href="/apidocs/org/jooby/Parser.html" target="_blank">parser</a> is responsible for parse or convert the HTTP request body to something else.</p> 
       <p>There are a few built-in parsers for reading body as String or Reader objects. Once the body is read it, it can’t be read it again.</p> 
       <p>A detailed explanation for parser is covered later. For now, all you need to know is that they can read/parse the HTTP body.</p> 
       <p>A body parser is registered in one of two ways:</p> 
       <ul> 
        <li>with <a href="/apidocs/org/jooby/Jooby.html#parser-org.jooby.Parser-" target="_blank">parser</a></li> 
       </ul> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
   <span class="n">parser</span><span class="o">(</span><span class="k">new</span> <span class="n">MyParser</span><span class="o">());</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <ul> 
        <li>or from inside a module:</li> 
       </ul> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="p">(</span><span class="n">Mode</span> <span class="n">mode</span><span class="o">,</span> <span class="n">Config</span> <span class="n">config</span><span class="o">,</span> <span class="n">Binder</span> <span class="n">binder</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Multibinder</span><span class="o">.</span><span class="na">newSetBinder</span><span class="o">(</span><span class="n">binder</span><span class="o">,</span> <span class="n">Parser</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">addBinding</span><span class="o">()</span>
        <span class="o">.</span><span class="na">toInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">MyParser</span><span class="o">());</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="request-form-submit">form submit</h3> 
       <p>Form submit and parsing via Java object is also supported:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Contact</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>

  <span class="kd">public</span> <span class="n">Contact</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>// enctype: x-www-form-urlencoded or multipart/form-data
<span class="nt">&lt;form</span> <span class="na">enctype=</span><span class="s">"application/x-www-form-urlencoded"</span> <span class="na">action=</span><span class="s">"/save"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"id"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"name"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">post</span><span class="o">(</span><span class="s">"/save"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Contact</span> <span class="n">contact</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">params</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">Contact</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="c1">// save contact...</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Nested paths are supported via <code class="highlighter-rouge codehilite">[name]</code> notation:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Contact</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>

  <span class="c1">// nested path</span>
  <span class="kd">private</span> <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>

  <span class="kd">public</span> <span class="n">Contact</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">email</span><span class="o">,</span> <span class="n">Address</span> <span class="n">addres</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">line</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">state</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">country</span><span class="o">;</span>

  <span class="n">publuc</span> <span class="n">Address</span><span class="o">(</span><span class="n">String</span> <span class="n">line</span><span class="o">,</span> <span class="n">String</span> <span class="n">state</span><span class="o">,</span> <span class="n">String</span> <span class="n">country</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>// enctype: x-www-form-urlencoded or multipart/form-data
<span class="nt">&lt;form</span> <span class="na">enctype=</span><span class="s">"application/x-www-form-urlencoded"</span> <span class="na">action=</span><span class="s">"/save"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"id"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"name"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"address[line]"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"address[state]"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"address[country]"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre> 
       </div> 
       <h3 id="request-file-upload">file upload</h3> 
       <p>File uploads are accessible via: <a href="/apidocs/org/jooby/Request.html#file-java.lang.String-" target="_blank">request.file(name)</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">enctype=</span><span class="s">"multipart/form-data"</span> <span class="na">action=</span><span class="s">"/upload"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"myfile"</span> <span class="na">type=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="c1">// Script API</span>

<span class="o">{</span>
   <span class="n">post</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="n">Upload</span> <span class="n">upload</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">file</span><span class="o">(</span><span class="s">"myfile"</span><span class="o">);</span>
     <span class="o">...</span>
   <span class="o">});</span>
<span class="o">}</span>

<span class="c1">// MVC API</span>

<span class="kd">class</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="nd">@Path</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">)</span> <span class="nd">@POST</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="n">upload</span><span class="o">(</span><span class="n">Upload</span> <span class="n">myfile</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="request-locals">locals</h3> 
       <p>Local attributes are bound to the current request. They are created every time a new request comes in and destroyed at the end of the request.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="o">...;</span>
    <span class="n">req</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"var"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
  <span class="o">});</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/locals"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// optional local</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">ifValue</span> <span class="o">=</span> <span class="n">rsp</span><span class="o">.</span><span class="na">ifGet</span><span class="o">(</span><span class="s">"var"</span><span class="o">);</span>

    <span class="c1">// required local</span>
    <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">rsp</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"var"</span><span class="o">);</span>

    <span class="c1">// local with default value</span>
    <span class="n">String</span> <span class="n">defvalue</span> <span class="o">=</span> <span class="n">rsp</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"var"</span><span class="o">,</span> <span class="s">"defvalue"</span><span class="o">);</span>

    <span class="c1">// all locals</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">locals</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">attributes</span><span class="o">();</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>In <code class="highlighter-rouge codehilite">mvc routes</code> request locals can be injected via <code class="highlighter-rouge codehilite">@Local</code> annotation:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Result</span> <span class="n">localAttr</span><span class="o">(</span><span class="nd">@Local</span> <span class="n">String</span> <span class="n">var</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Result</span> <span class="n">ifLocalAttr</span><span class="o">(</span><span class="nd">@Local</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">var</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Result</span> <span class="n">attributes</span><span class="o">(</span><span class="nd">@Local</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">attributes</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

</code></pre> 
       </div> 
       <h3 id="request-flash-scope">flash scope</h3> 
       <p>The flash scope is designed to transport success and error messages, between requests. The flash scope is similar to <a href="#session">Session</a> but lifecycle is shorter: <em>data are kept for only one request</em>.</p> 
       <p>The flash scope is implemented as client side cookie, so it helps to keep application stateless.</p> 
       <h4 id="request-usage">usage</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">org.jooby.FlashScope</span><span class="o">;</span>

<span class="o">...</span>

<span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">FlashScope</span><span class="o">());</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="na">ifFlash</span><span class="o">(</span><span class="s">"success"</span><span class="o">).</span><span class="na">orElse</span><span class="o">(</span><span class="s">"Welcome!"</span><span class="o">);</span>
  <span class="o">});</span>

  <span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">req</span><span class="o">.</span><span class="na">flash</span><span class="o">(</span><span class="s">"success"</span><span class="o">,</span> <span class="s">"The item has been created"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">redirect</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p><a href="/apidocs/org/jooby/FlashScope.html" target="_blank">FlashScope</a> is also available on mvc routes via <a href="/apidocs/org/jooby/mvc/Flash.html" target="_blank">@Flash</a> annotation:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nd">@Path</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Controller</span> <span class="o">{</span>
  
  <span class="c1">// Access to flashScope</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="n">flashScope</span><span class="o">(</span><span class="nd">@Flash</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">flash</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="c1">// Access to a required flash attribute</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="n">flashAttr</span><span class="o">(</span><span class="nd">@Flash</span> <span class="n">String</span> <span class="n">foo</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="c1">// Access to an optional flash attribute</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="n">optionlFlashAttr</span><span class="o">(</span><span class="nd">@Flash</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">foo</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span> 
  <span class="o">}</span>
<span class="o">}</span> 
</code></pre> 
       </div> 
       <p>Worth to mention that flash attributes are accessible from template engine of your choice by prefixing flash attributes with <code class="highlighter-rouge codehilite">flash.</code>. Here is a (handlebars.java)[/doc/hbs] example:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>{{#if flash.success}}
  {{flash.success}}

{{else}}
  Welcome!

{{/if}}
</code></pre> 
       </div> 
       <h3 id="request-require">require</h3> 
       <p>In previous section we learnt you can bind/wire your objects with <a href="https://github.com/google/guice" target="_blank">Guice</a>.</p> 
       <p>You can ask <a href="https://github.com/google/guice" target="_blank">Guice</a> to wired an object from the <a href="/apidocs/org/jooby/Request.html#require-com.google.inject.Key-" target="_blank">request.require(type)</a></p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">A</span> <span class="n">a</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">A</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="request-access-log">access log</h3> 
       <p>Log all the matched incoming requested using the <a href="https://en.wikipedia.org/wiki/Common_Log_Format" target="_blank">NCSA format</a> (a.k.a common log format).</p> 
       <h4 id="request-usage">usage</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLog</span><span class="o">());</span>

  <span class="o">...</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Output looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>127.0.0.1 - - [04/Oct/2016:17:51:42 +0000] "GET / HTTP/1.1" 200 2
</code></pre> 
       </div> 
       <p>You probably want to configure the <code class="highlighter-rouge codehilite">RequestLog</code> logger to save output into a new file:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"ACCESS"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.RollingFileAppender"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;file&gt;</span>access.log<span class="nt">&lt;/file&gt;</span>

  <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fileNamePattern&gt;</span>access.%d{yyyy-MM-dd}.log<span class="nt">&lt;/fileNamePattern&gt;</span>
  <span class="nt">&lt;/rollingPolicy&gt;</span>

  <span class="nt">&lt;encoder&gt;</span>
    <span class="nt">&lt;pattern&gt;</span>%msg%n<span class="nt">&lt;/pattern&gt;</span>
  <span class="nt">&lt;/encoder&gt;</span>
<span class="nt">&lt;/appender&gt;</span>

<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.jooby.RequestLogger"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"ACCESS"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/logger&gt;</span>
</code></pre> 
       </div> 
       <p>Due that authentication is provided via module or custom filter, there is no concept of logged/authenticated user. Still you can log the current user by setting an user id provider at construction time:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="c1">// authenticate user and set local attribute</span>
    <span class="n">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="o">...;</span>
    <span class="n">req</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"userId"</span><span class="o">,</span> <span class="n">userId</span><span class="o">);</span>
  <span class="o">});</span>

  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLogger</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"userId"</span><span class="o">);</span>
  <span class="o">}));</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Here an application filter set an <code class="highlighter-rouge codehilite">userId</code> request attribute and then we provide that <code class="highlighter-rouge codehilite">userId</code> to {@link RequestLogger}.</p> 
       <h4 id="request-custom-log-function">custom log function</h4> 
       <p>By default it uses the underlying logging system: <a href="http://logback.qos.ch" target="_blank">logback</a>. That’s why we previously show how to configure the <code class="highlighter-rouge codehilite">org.jooby.RequestLogger</code> in <code class="highlighter-rouge codehilite">logback.xml</code>.</p> 
       <p>If you want to log somewhere else and/or use a different technology then:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">ResponseLogger</span><span class="o">()</span>
    <span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">line</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
    <span class="o">}));</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>This is just an example but of course you can log the <code class="highlighter-rouge codehilite">NCSA</code> line to database, jms queue, etc…</p> 
       <h4 id="request-latency">latency</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLogger</span><span class="o">()</span>
      <span class="o">.</span><span class="na">latency</span><span class="o">());</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>It add a new entry at the last of the <code class="highlighter-rouge codehilite">NCSA</code> output that represents the number of <code class="highlighter-rouge codehilite">ms</code> it took to process the incoming release.</p> 
       <h4 id="request-extended">extended</h4> 
       <p>Extend the <code class="highlighter-rouge codehilite">NCSA</code> by adding the <code class="highlighter-rouge codehilite">Referer</code> and <code class="highlighter-rouge codehilite">User-Agent</code> headers to the output.</p> 
       <h4 id="request-dateFormatter">dateFormatter</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLogger</span><span class="o">()</span>
      <span class="o">.</span><span class="na">dateFormatter</span><span class="o">(</span><span class="n">ts</span> <span class="o">-&gt;</span> <span class="o">...));</span>

  <span class="c1">// OR</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLogger</span><span class="o">()</span>
      <span class="o">.</span><span class="na">dateFormatter</span><span class="o">(</span><span class="n">DateTimeFormatter</span><span class="o">...));</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Override, the default formatter for the request arrival time defined by: <a href="/apidocs/org/jooby/Request.html#timestamp----" target="_blank">Request#timestamp()</a>. You can provide a function or an instance of <code class="highlighter-rouge codehilite">DateTimeFormatter</code>.</p> 
       <p>The default formatter use the default server time zone, provided by <code class="highlighter-rouge codehilite">ZoneId#systemDefault()</code>. It’s possible to just override the time zone (not the entirely formatter) too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">RequestLogger</span><span class="o">()</span>
     <span class="o">.</span><span class="na">dateFormatter</span><span class="o">(</span><span class="n">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"UTC"</span><span class="o">));</span>
<span class="o">}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="response"> 
      <div class="datalist-title "> 
       <h2>response</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>The response object contains methods for reading and setting headers, status code and body (between others). In the next section we will mention the most important method of a response object, if you need more information please refer to the <a href="/apidocs/org/jooby/Response.html" target="_blank">javadoc</a>.</p> 
       <h3 id="response-send">send</h3> 
       <p>The <a href="/apidocs/org/jooby/Response.html#send-org.jooby.Result-" target="_blank">rsp.send</a> method is responsible for sending and writing data into the HTTP Response.</p> 
       <p>A <a href="/apidocs/org/jooby/Renderer.html" target="_blank">renderer</a> is responsible for converting a Java Object into something else (json, html, etc..).</p> 
       <p>Let’s see a simple example:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"hey jooby"</span><span class="o">));</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="s">"hey jooby"</span><span class="o">);</span> <span class="c1">// or just return a value and Jooby will call send for you.</span>
</code></pre> 
       </div> 
       <p>The <strong>send</strong> method will ask the <a href="/apidocs/org/jooby/Renderer.html" target="_blank">Renderer API</a> to format an object and write a response.</p> 
       <p>The resulting <code class="highlighter-rouge codehilite">Content-Type</code> when is not set is <code class="highlighter-rouge codehilite">text/html</code>.</p> 
       <p>The resulting <code class="highlighter-rouge codehilite">Status Code</code> when is not set is <code class="highlighter-rouge codehilite">200</code>.</p> 
       <p>Some examples:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="c1">// text/html with 200</span>
   <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="o">...;</span>
   <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="c1">// text/plain with 200 explicitly </span>
   <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="o">...;</span>
   <span class="n">rsp</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">200</span><span class="o">)</span>
        <span class="o">.</span><span class="na">type</span><span class="o">(</span><span class="s">"text/plain"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Alternative:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="c1">// text/plain with 200 explicitly </span>
   <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="o">...;</span>
   <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">200</span><span class="o">)</span>
        <span class="o">.</span><span class="na">type</span><span class="o">(</span><span class="s">"text/plain"</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="response-headers">headers</h3> 
       <p>Retrieval of response headers is done via <a href="/apidocs/org/jooby/Response.html#header-java.lang.String-" target="_blank">rsp.header(“name”)</a>. The method always returns a <a href="/apidocs/org/jooby/Mutant.html" target="_blank">Mutant</a> and from there you can convert to any of the supported types.</p> 
       <p>Setting a header is pretty straightforward too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">rsp</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Header-Name"</span><span class="o">,</span> <span class="n">value</span><span class="o">).</span><span class="na">header</span><span class="o">(</span><span class="s">"Header2"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
</code></pre> 
       </div> 
       <h3 id="response-send-file">send file</h3> 
       <p>Send file API is available via <a href="/apidocs/org/jooby/Response.html#download-java.lang.String-" target="_blank">rsp.download*</a> methods:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/download"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">rsp</span><span class="o">.</span><span class="na">download</span><span class="o">(</span><span class="s">"myfile"</span><span class="o">,</span> <span class="k">new</span> <span class="n">File</span><span class="o">(...));</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The <code class="highlighter-rouge codehilite">download</code> method sets all these headers:</p> 
       <ul> 
        <li> <p><code class="highlighter-rouge codehilite">Content-Disposition</code></p> </li> 
        <li> <p><code class="highlighter-rouge codehilite">Content-Length</code></p> </li> 
        <li> <p><code class="highlighter-rouge codehilite">Content-Type</code></p> </li> 
       </ul> 
       <p>The next example we explicitly set some of these headers:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/download"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">rsp</span>
      <span class="o">.</span><span class="na">type</span><span class="o">(</span><span class="s">"text/plain"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Content-Disposition"</span><span class="o">,</span> <span class="s">"attachment; filename=myfile.txt;"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">download</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(...));</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="response-content-negotiation">content negotiation</h3> 
       <p>A route can produces different results based on the <code class="highlighter-rouge codehilite">Accept</code> header:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span>
  <span class="n">Results</span>
    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">,</span> <span class="o">()</span>  <span class="o">-&gt;</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"viewname"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"model"</span><span class="o">,</span> <span class="n">model</span><span class="o">))</span>
    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">,</span> <span class="o">()</span>  <span class="o">-&gt;</span> <span class="n">model</span><span class="o">)</span>
    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="o">()</span>  <span class="o">-&gt;</span> <span class="n">Status</span><span class="o">.</span><span class="na">NOT_ACCEPTABLE</span><span class="o">)</span>
<span class="o">);</span>
</code></pre> 
       </div> 
       <p>Performs content-negotiation on the Accept HTTP header of the request object. It select a handler for the request, based on the acceptable types ordered by their quality values. If the header is not specified, the first callback is invoked. When no match is found, the server responds with <code class="highlighter-rouge codehilite">406 Not Acceptable</code>, or invokes the default callback: <code class="highlighter-rouge codehilite">**/*</code>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="session"> 
      <div class="datalist-title "> 
       <h2>session</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Sessions are created on demand via: <a href="/apidocs/org/jooby/Request.html#ifSession--" target="_blank">req.ifSession()</a> or <a href="/apidocs/org/jooby/Request.html#session--" target="_blank">req.session()</a>.</p> 
       <p>Sessions have a lot of uses cases but most commons are: auth, store information about current user, etc.</p> 
       <p>A session attribute must be <code class="highlighter-rouge codehilite">String</code> or a primitive. Session doesn’t allow to store arbitrary objects. It is a simple mechanism to store basic data.</p> 
       <h3 id="session-usage">usage</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">session</span><span class="o">();</span>

    <span class="c1">// set attribute</span>
    <span class="n">session</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span>

    <span class="c1">// get attribute</span>
    <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"foo"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Previous example will use an <code class="highlighter-rouge codehilite">in-memory</code> session. The next example uses a cookie:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">cookieSession</span><span class="o">();</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">session</span><span class="o">();</span>

    <span class="c1">// set attribute</span>
    <span class="n">session</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span>

    <span class="c1">// get attribute</span>
    <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"foo"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The cookie session store depends on the <code class="highlighter-rouge codehilite">application.secret</code> property. We sign the cookie with the <code class="highlighter-rouge codehilite">application.secret</code> property.</p> 
       <p>If <code class="highlighter-rouge codehilite">memory</code> or <code class="highlighter-rouge codehilite">cookie</code> store are not an option, then you can choose one of the <a href="/doc/session">high performance session store</a> provided by <a href="http://jooby.org">Jooby</a>. We provide session stores for <code class="highlighter-rouge codehilite">redis</code>, <code class="highlighter-rouge codehilite">memcached</code>, <code class="highlighter-rouge codehilite">mongodb</code>, <code class="highlighter-rouge codehilite">cassandra</code>, <code class="highlighter-rouge codehilite">couchbase</code>, <code class="highlighter-rouge codehilite">hazelcast</code> and <a href="/doc/session">lot more</a>.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">cookieSession</span><span class="o">();</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">session</span><span class="o">();</span>

    <span class="c1">// set attribute</span>
    <span class="n">session</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span>

    <span class="c1">// get attribute</span>
    <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"foo"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="session-no-timeout">no timeout</h3> 
       <p>There is no timeout for sessions from server perspective. By default, a session will expire when the user close the browser (a.k.a session cookie) or the cookie session has expired via <code class="highlighter-rouge codehilite">maxAge</code> attribute.</p> 
       <p>Session store implementation might or might not implemented a server <code class="highlighter-rouge codehilite">timeout</code>.</p> 
       <h3 id="session-cookie">cookie</h3> 
       <h4 id="session-max-age">max-age</h4> 
       <p>The <code>session.cookie.maxAge</code> sets the maximum age in seconds. A positive value indicates that the cookie will expire after that many seconds have passed. Note that the value is the <i>maximum</i> age when the cookie will expire, not the cookie’s current age.</p> 
       <p>A negative value means that the cookie is not stored persistently and will be deleted when the Web browser exits.</p> 
       <p>Default maxAge is: <code>-1</code>.</p> 
       <h4 id="session-signed-cookie">signed cookie</h4> 
       <p>If the <code>application.secret</code> property has been set, then the session cookie will be signed it with it.</p> 
       <h4 id="session-cookie-s-name">cookie’s name</h4> 
       <p>The <code>session.cookie.name</code> indicates the name of the cookie that hold the session ID, by defaults: <code>jooby.sid</code>. Cookie’s name can be explicitly set with <a href="/apidocs/org/jooby/Cookie.Definition.html#name-java.lang.String-" target="_blank">cookie.name(“name”)</a> on <a href="/apidocs/org/jooby/Session.Definition.html#cookie" target="_blank">Session.Definition#cookie()</a>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="error-handling"> 
      <div class="datalist-title "> 
       <h2>error handling</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Error handler is represented by the <a href="/apidocs/org/jooby/Err.Handler.html" target="_blank">Err.Handler</a> class and allows you to log and/or render exceptions.</p> 
       <h3 id="error-handling-default-err-handler">default err handler</h3> 
       <p>The <a href="/apidocs/org/jooby/Err.DefHandler.html" target="_blank">default error handler</a> does content negotiation and optionally display friendly err pages using naming convention.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">TemplateEngine</span><span class="o">());</span> <span class="c1">// Hbs, Ftl, etc...</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">Json</span><span class="o">());</span> <span class="c1">// A json body formatter</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">();</span>
    <span class="o">...</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="error-handling-html">html</h4> 
       <p>If a request to <code class="highlighter-rouge codehilite">/</code> has an <code class="highlighter-rouge codehilite">Accept: text/html</code> header. Then, the default err handler will ask to a <a href="/apidocs/org/jooby/View.Engine.html" target="_blank">View.Engine</a> to render the <code class="highlighter-rouge codehilite">err</code> view.</p> 
       <p>The default model has these attributes:</p> 
       <ul> 
        <li>message: exception string</li> 
        <li>stacktrace: exception stack-trace as an array of string</li> 
        <li>status: status code, like <code class="highlighter-rouge codehilite">400</code></li> 
        <li>reason: status code reason, like <code class="highlighter-rouge codehilite">BAD REQUEST</code></li> 
       </ul> 
       <p>Here is a simply <code class="highlighter-rouge codehilite">public/err.html</code> error page:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
  {{ "{{status" }}}}:{{ "{{reason" }}}}
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre> 
       </div> 
       <p>HTTP status code will be set too.</p> 
       <h4 id="error-handling-no-html">no html</h4> 
       <p>If a request to <code class="highlighter-rouge codehilite">/</code> has an <code class="highlighter-rouge codehilite">Accept: application/json</code> header. Then, the default err handler will ask to a <a href="/apidocs/org/jooby/Renderer.html" target="_blank">renderer</a> to render the <code class="highlighter-rouge codehilite">err</code> model.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w"> </span><span class="nt">"stacktrace"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w"> </span><span class="p">}</span><span class="w"> </span></code></pre> 
       </div> 
       <p>In both cases, the error model is the result of <code class="highlighter-rouge codehilite">err.toMap()</code> which creates a lightweight version of the exception.</p> 
       <p>HTTP status code will be set too.</p> 
       <h3 id="error-handling-custom-err-handler">custom err handler</h3> 
       <p>If the default view resolution and/or err model isn’t enough, you can create your own err handler:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">err</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">log</span><span class="o">.</span><span class="na">err</span><span class="o">(</span><span class="s">"err found: "</span><span class="o">,</span> <span class="n">err</span><span class="o">);</span>
    <span class="c1">// do what ever you want here</span>
    <span class="n">rsp</span><span class="o">.</span><span class="na">send</span><span class="o">(...);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Err handler are executed in the order they were provided (like routes, parsers and renderers). The first err handler that send an output wins!</p> 
       <h4 id="error-handling-catch-specific-exception-or-status-code">catch specific exception or status code</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">err</span><span class="o">(</span><span class="n">MyException1</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">MyException1</span> <span class="n">cause</span> <span class="o">=</span> <span class="o">(</span><span class="n">MyException1</span><span class="o">)</span> <span class="n">err</span><span class="o">.</span><span class="na">getCause</span><span class="o">();</span>
    <span class="c1">// handle MyException1</span>
  <span class="o">});</span>

  <span class="n">err</span><span class="o">(</span><span class="n">MyException2</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">MyException2</span> <span class="n">cause</span> <span class="o">=</span> <span class="o">(</span><span class="n">MyException2</span><span class="o">)</span> <span class="n">err</span><span class="o">.</span><span class="na">getCause</span><span class="o">();</span>
    <span class="c1">// handle MyException2</span>
  <span class="o">});</span>

  <span class="n">err</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle any other exception</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or you can catch exception base on their response status code (see next section):</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">err</span><span class="o">(</span><span class="mi">404</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle 404</span>
  <span class="o">});</span>

  <span class="n">err</span><span class="o">(</span><span class="mi">503</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle 503</span>
  <span class="o">});</span>

  <span class="n">err</span><span class="o">((</span><span class="n">req</span><span class="o">,</span> <span class="n">rsp</span><span class="o">,</span> <span class="n">err</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle any other exception</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="error-handling-status-code">status code</h3> 
       <p>Default status code is <code class="highlighter-rouge codehilite">500</code>, except for:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>| Exception                          | Status Code |
| ---------------------------------- | ----------- |
| java.lang.IllegalArgumentException |     400     |
|                                    |             |
| java.util.NoSuchElementException   |     400     |
|                                    |             |
| java.io.FileNotFoundException      |     404     |
</code></pre> 
       </div> 
       <h4 id="error-handling-custom-status-code">custom status code</h4> 
       <p>Just throw an <a href="/apidocs/org/jooby/Err.html" target="_blank">Err</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="k">throw</span> <span class="k">new</span> <span class="nf">Err</span><span class="p">(</span><span class="mi">403</span><span class="o">);</span>
</code></pre> 
       </div> 
       <p>or add a new entry in the <code class="highlighter-rouge codehilite">application.conf</code> file:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">err.com.security.Forbidden</span> <span class="p">=</span> <span class="s">403</span>
</code></pre> 
       </div> 
       <p>So, now if you throw a <code class="highlighter-rouge codehilite">com.security.Forbidden</code> exception the status code will be <code class="highlighter-rouge codehilite">403</code>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="parser-and-renderer"> 
      <div class="datalist-title "> 
       <h2>parser and renderer</h2> 
      </div> 
      <div class="datalist-content"> 
       <h3 id="parser-and-renderer-parser">parser</h3> 
       <p>A <a href="/apidocs/org/jooby/Parser.html" target="_blank">Parser</a> is responsible for parsing the HTTP params and/or body to something else.</p> 
       <p>Automatic type conversion is provided when a type:</p> 
       <ul> 
        <li>Is a primitive, primitive wrapper or String</li> 
        <li>Is an enum</li> 
        <li>Is an <a href="/apidocs/org/jooby/Upload.html" target="_blank">Upload</a></li> 
        <li>Has a public <strong>constructor</strong> that accepts a single <strong>String</strong> argument</li> 
        <li>Has a static method <strong>valueOf</strong> that accepts a single <strong>String</strong> argument</li> 
        <li>Has a static method <strong>fromString</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.util.UUID</code></li> 
        <li>Has a static method <strong>forName</strong> that accepts a single <strong>String</strong> argument. Like <code class="highlighter-rouge codehilite">java.nio.charset.Charset</code></li> 
        <li>It is an Optional 
         <t>
           , List 
          <t>
            , Set 
           <t>
             or SortedSet 
            <t>
              where T satisfies one of previous rules 
            </t> 
           </t> 
          </t> 
         </t></li> 
       </ul> 
       <h4 id="parser-and-renderer-custom-parser">custom parser</h4> 
       <p>Suppose we want to write a custom parser to convert a value into an <code class="highlighter-rouge codehilite">integer</code>. In practice we don’t need such parser bc it is provided, this is an example.</p> 
       <p>Let’s see how to create our custom HTTP param parser:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">parser</span><span class="o">((</span><span class="n">type</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="c1">// 1</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">getRawType</span><span class="o">()</span> <span class="o">==</span> <span class="kt">int</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 2</span>
    <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="n">values</span> <span class="o">-&gt;</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="c1">// 3</span>
  <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">intValue</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"v"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
   <span class="o">...</span>
<span class="o">});</span>

</code></pre> 
       </div> 
       <p>Let’s have a closer look:</p> 
       <p>1) Check if current type is what we can parse to</p> 
       <p>2) We add a param callback</p> 
       <p>3) We can’t deal with current type, so we ask next parser to resolve it</p> 
       <p>Now, if we ask for HTTP body</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">intValue</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">intValue</span><span class="o">();</span>
   <span class="o">...</span>
<span class="o">});</span>

</code></pre> 
       </div> 
       <p>Our custom parser won’t be able to parse the HTTP body, because it works on HTTP parameter. In order to extend our custom parser and use it for HTTP Body we must do:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">parser</span><span class="o">((</span><span class="n">type</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="c1">// 1</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">getRawType</span><span class="o">()</span> <span class="o">==</span> <span class="kt">int</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 2</span>
    <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="n">values</span> <span class="o">-&gt;</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
       <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">body</span> <span class="o">-&gt;</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">text</span><span class="o">()));</span>
  <span class="o">}</span>
  <span class="c1">// 3</span>
  <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="o">});</span>

</code></pre> 
       </div> 
       <p>And now we can ask for a HTTP param and/or body.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">intValue</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"v"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
   <span class="o">...</span>
<span class="o">});</span>

<span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">intValue</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">intValue</span><span class="o">();</span>
   <span class="o">...</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p><a href="/apidocs/org/jooby/Parser.html" target="_blank">Parser</a> API is very powerful. It let you apply a parser to a HTTP param, set of param (like a form post), file uploads and/or body. But not just that, you are free to choose if your parser applies for a Java Type and/or a Media Type, like the <code class="highlighter-rouge codehilite">Content-Type</code> header.</p> 
       <p>For example a generic JSON parser looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">parser</span><span class="o">((</span><span class="n">type</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">type</span><span class="o">().</span><span class="na">name</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">body</span> <span class="o">-&gt;</span> <span class="n">fromJSON</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">text</span><span class="o">()));</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Parsers are executed in the order they are defined.</p> 
       <p>If a param parser isn’t able to resolve a param a <code class="highlighter-rouge codehilite">BAD REQUEST(400)</code> error will be generated.</p> 
       <p>If a body parser isn’t able to resolve a param an <code class="highlighter-rouge codehilite">UNSUPPORTED_MEDIA_TYPE(415)</code> error will be generated.</p> 
       <h3 id="parser-and-renderer-renderer">renderer</h3> 
       <p>A <a href="/apidocs/org/jooby/Renderer.html" target="_blank">Renderer</a> converts a Java Object to a series of bytes or text and write them into the HTTP response.</p> 
       <p>There are a few built-in renderers:</p> 
       <ul> 
        <li>stream: copy an inputstream to the HTTP response and set a default type of: <code class="highlighter-rouge codehilite">application/octet-stream</code></li> 
        <li>bytes: copy bytes to the HTTP response and set a default type of: <code class="highlighter-rouge codehilite">application/octet-stream</code></li> 
        <li>byteBuffer: copy bytes to the HTTP response and set a default type of: <code class="highlighter-rouge codehilite">application/octet-stream</code></li> 
        <li>readble: copy a readable object to the HTTP response and a default type of: <code class="highlighter-rouge codehilite">text/html</code></li> 
        <li>text: copy the toString() result to the HTTP response and set a default type of: <code class="highlighter-rouge codehilite">text/html</code></li> 
       </ul> 
       <h4 id="parser-and-renderer-custom-renderer">custom renderer</h4> 
       <p>Suppose we want to apply a custom rendering for <code class="highlighter-rouge codehilite">MyObject</code>. Renderer is as simple as:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">render</span><span class="o">((</span><span class="n">value</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="n">instanceOf</span> <span class="n">MyObject</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">ctx</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="k">return</span> <span class="k">new</span> <span class="n">MyObject</span><span class="o">();</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Easy right?</p> 
       <p>A generic JSON renderer will looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="n">render</span><span class="o">((</span><span class="n">value</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">accepts</span><span class="o">(</span><span class="s">"json"</span><span class="o">))</span> <span class="o">{</span>
     <span class="n">ctx</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">toJson</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">});</span>

<span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="k">return</span> <span class="k">new</span> <span class="n">MyObject</span><span class="o">();</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <p>Renderer API is simple and powerful. Renderers are executed in the order they were defined. The renderer who write the response first wins!</p> 
       <h3 id="parser-and-renderer-view-engine">view engine</h3> 
       <p>A <a href="/apidocs/org/jooby/View.Engine.html" target="_blank">view engine</a> is a specialized <a href="/apidocs/org/jooby/Renderer.html" target="_blank">renderer</a> that ONLY accept instances of a <a href="/apidocs/org/jooby/View.html" target="_blank">view</a>.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">MyTemplateEngine</span><span class="o">());</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"viewname"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"model"</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>In order to support multiples view engine, a view engine is allowed to throw a <code class="highlighter-rouge codehilite">java.io.FileNotFoundException</code> when a template can’t be resolved it. This gives the chance to the next view resolver to load the template.</p> 
       <p>There is no much to say about views &amp; engines, any other detail or documentation should be provided in the specific <a href="/doc/parser-and-renderer">module</a></p> 
      </div> 
     </div> 
     <div class="datalist" id="async"> 
      <div class="datalist-title "> 
       <h2>async</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>In <a href="http://jooby.org">Jooby</a> all the IO operations are performed in async &amp; non blocking fashion across servers: <a href="/doc/netty">Netty</a>, <a href="/doc/jetty">Jetty</a> and <a href="/doc/undertow">Undertow</a>.</p> 
       <p>All IO operations run in an IO thread while application logic <strong>always run in a worker thread</strong>. Worker threads can block at any time.</p> 
       <p>Having said that let see what tools are available for reactive/async programming.</p> 
       <h3 id="async-threads">threads</h3> 
       <p>Default worker thread pool is 20/100. You can change this setup via <code class="highlighter-rouge codehilite">.conf</code> file:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">server.threads.Min</span><span class="p">=</span><span class="s">20</span>
<span class="py">server.threads.Max</span><span class="p">=</span><span class="s">20</span>
</code></pre> 
       </div> 
       <p>You can set them to the <code class="highlighter-rouge codehilite">available processors</code>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">server.threads.Min</span> <span class="p">=</span> <span class="s">${runtime.processors}</span>
<span class="py">server.threads.Max</span> <span class="p">=</span> <span class="s">${runtime.processors}</span>
</code></pre> 
       </div> 
       <p>Or pick one variant: <code class="highlighter-rouge codehilite">runtime.processors-plus1</code>, <code class="highlighter-rouge codehilite">runtime.processors-plus2</code> or <code class="highlighter-rouge codehilite">runtime.processors-x2</code>.</p> 
       <p>This is a typical setup if you want to build your application using <strong>reactive</strong> programming.</p> 
       <h3 id="async-deferred">deferred</h3> 
       <p>Async processing is achieved via: <a href="/apidocs/org/jooby/Deferred.html" target="_blank">Deferred API</a>. Application can produces a result from a thread of its choice.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">Executor</span> <span class="n">executor</span> <span class="o">=</span> <span class="o">...;</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/async"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Deferred</span> <span class="n">deferred</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Deferred</span><span class="o">();</span>
    <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="n">deferred</span><span class="o">.</span><span class="na">resolve</span><span class="o">(...);</span> <span class="c1">// success</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">deferred</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span> <span class="c1">// errr</span>
      <span class="o">}</span>
    <span class="o">});</span>
    <span class="k">return</span> <span class="n">deferred</span><span class="o">;</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Too verbose? Let’s rewrite it a bit with: <code class="highlighter-rouge codehilite">Jooby.promise</code></p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">Executor</span> <span class="n">executor</span> <span class="o">=</span> <span class="o">...;</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/async"</span><span class="o">,</span> <span class="n">promise</span><span class="o">(</span><span class="n">deferred</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="n">deferred</span><span class="o">.</span><span class="na">resolve</span><span class="o">(...);</span> <span class="c1">// success</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">deferred</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span> <span class="c1">// errr</span>
      <span class="o">}</span>
    <span class="o">});</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A bit better, let’s try it again with automatic error handler:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">Executor</span> <span class="n">executor</span> <span class="o">=</span> <span class="o">...;</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/async"</span><span class="o">,</span> <span class="n">promise</span><span class="o">(</span><span class="n">deferred</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">deferred</span><span class="o">.</span><span class="na">resolve</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
           <span class="k">return</span> <span class="o">...;</span>
        <span class="o">});</span>
    <span class="o">});</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Better, hugh? but we can make it just a bit better:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">Executor</span> <span class="n">executor</span> <span class="o">=</span> <span class="o">...;</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/async"</span><span class="o">,</span> <span class="n">promise</span><span class="o">(</span><span class="n">deferred</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">deferred</span><span class="o">.</span><span class="na">run</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">...;</span>
    <span class="o">});</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>All the examples work in the same way, you can choose which programming model makes <strong>more sense to you</strong>.</p> 
       <p>The last two examples, will <code class="highlighter-rouge codehilite">resolve</code> the deferred. But also, catch any error and call <code class="highlighter-rouge codehilite">reject</code> for you.</p> 
       <p><a href="/apidocs/org/jooby/Deferred.html" target="_blank">Deferred API</a> is pretty simple and the main goal of is to detach the request, or put it in async mode then you can produces a result from a thread of its choice.</p> 
       <h3 id="async-RxJava-example">RxJava example</h3> 
       <p>Here is an example of deferred with <a href="https://github.com/ReactiveX/RxJava" target="_blank">RxJava</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">get</span><span class="o">(</span><span class="s">"/rx"</span><span class="o">,</span> <span class="n">promise</span><span class="o">(</span><span class="n">deferred</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">Observable</span><span class="o">.&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">create</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">s</span><span class="o">.</span><span class="na">onNext</span><span class="o">(...);</span>
      <span class="n">s</span><span class="o">.</span><span class="na">onCompleted</span><span class="o">();</span>
    <span class="o">}).</span><span class="na">subscribeOn</span><span class="o">(</span><span class="n">Schedulers</span><span class="o">.</span><span class="na">computation</span><span class="o">())</span>
      <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="nl">deferred:</span><span class="o">:</span><span class="n">resolve</span><span class="o">,</span> <span class="nl">deferred:</span><span class="o">:</span><span class="n">reject</span><span class="o">);</span>
    <span class="o">}));</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>And of course the threads setup:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">server.threads.Min</span> <span class="p">=</span> <span class="s">${runtime.processors}</span>
<span class="py">server.threads.Max</span> <span class="p">=</span> <span class="s">${runtime.processors}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="http-"> 
      <div class="datalist-title "> 
       <h2>http/2</h2> 
      </div> 
      <div class="datalist-content"> 
       <p><code class="highlighter-rouge codehilite">HTTP/2.0</code> is supported across the available <a href="/doc/servers">server implementations</a>. To enabled <code class="highlighter-rouge codehilite">HTTP/2.0</code> you need to set these properties:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>server.http2.enabled = true

application.securePort = 8443
</code></pre> 
       </div> 
       <p>Or programmatically like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="c1">// HTTP/2.0 clear text (a.k.a h2c)</span>
  <span class="n">http2</span><span class="o">();</span>

  <span class="c1">// HTTP/2.0 over TLS</span>
  <span class="n">securePort</span><span class="o">(</span><span class="mi">8443</span><span class="o">);</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="n">req</span><span class="o">.</span><span class="na">protocol</span><span class="o">());</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Browsers don’t support <code class="highlighter-rouge codehilite">H2C</code> (H2 clear text) so that’s why you might need to configure <a href="/doc/#https">HTTPS</a> too.</p> 
       <p>At <code class="highlighter-rouge codehilite">bootstrap time</code> you will see a <code class="highlighter-rouge codehilite">+h2</code> flag that indicates that <code class="highlighter-rouge codehilite">HTTP/2.0</code> is enabled:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>   http://localhost:8080/ +h2
   https://localhost:8443/ +h2
</code></pre> 
       </div> 
       <p>Some servers require special configuration (beside <a href="/doc/#https">HTTPS</a>). So it’s always a good practice to check the <code class="highlighter-rouge codehilite">HTTP/2.0</code> section of the server implementation to learn more about current support, limitation and/or configuration steps.</p> 
       <h3 id="http--server-push">server push</h3> 
       <p>Server push is supported via <a href="/apidocs/org/jooby/Request.html#push-java.lang.String-" target="_blank">Request.push</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="c1">// HTTP/2.0 clear text (a.k.a h2c)</span>
  <span class="n">http2</span><span class="o">();</span>

  <span class="c1">// HTTP/2.0 over TLS</span>
  <span class="n">securePort</span><span class="o">(</span><span class="mi">8443</span><span class="o">);</span>

  <span class="n">assets</span><span class="o">(</span><span class="s">"/js/**"</span><span class="o">);</span>

  <span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">req</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">"/js/home.js"</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"home"</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>When the <em>browser</em> request the <code class="highlighter-rouge codehilite">home</code> page, we will also send the <code class="highlighter-rouge codehilite">/js/home.js</code> resource too!!</p> 
      </div> 
     </div> 
     <div class="datalist" id="server-sent-events"> 
      <div class="datalist-title "> 
       <h2>server-sent events</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Server-Sent Events (SSE) is a mechanism that allows server to push the data from the server to the client once the client-server connection is established by the client. Once the connection is established by the client, it is the server who provides the data and decides to send it to the client whenever new <strong>chunk</strong> of data is available.</p> 
       <h3 id="server-sent-events-usage">usage</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="c1">// 1. connected</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"data"</span><span class="o">);</span> <span class="c1">// 2. send/push data</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Simple, effective and easy to use. The callback will be executed once when a new client is connected. Inside the callback we can send data, listen for connection close events, etc.</p> 
       <p>There is a factory method <a href="/apidocs/org/jooby/Sse.html#event-java.lang.Object-" target="_blank">sse.event(Object)</a> that let you set event attributes:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">sse</span><span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="s">"data"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"myevent"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">retry</span><span class="o">(</span><span class="mi">5000L</span><span class="o">)</span>
        <span class="o">.</span><span class="na">send</span><span class="o">();</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="server-sent-events-structured-data">structured data</h3> 
       <p>Beside raw/string data you can also send structured data, like <code class="highlighter-rouge codehilite">json</code>, <code class="highlighter-rouge codehilite">xml</code>, etc..</p> 
       <p>The next example will send two message one in <code class="highlighter-rouge codehilite">json</code> format and one in <code class="highlighter-rouge codehilite">text/plain</code> format:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">MyJsonRenderer</span><span class="o">());</span>

  <span class="n">sse</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">object</span><span class="o">,</span> <span class="s">"json"</span><span class="o">);</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">object</span><span class="o">,</span> <span class="s">"plain"</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Or if your need only one format, just:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="k">new</span> <span class="n">MyJsonRenderer</span><span class="o">());</span>

  <span class="n">sse</span><span class="o">(</span><span class="s">"/path"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
  <span class="o">}).</span><span class="na">produces</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span> <span class="c1">// by json by default</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="server-sent-events-request-params">request params</h3> 
       <p>We provide request access via two arguments callback:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/events/:id"</span><span class="o">,</span> <span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">sse</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
    <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="n">findObject</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="server-sent-events-connection-lost">connection lost</h3> 
       <p>The <a href="/apidocs/org/jooby/Sse.html#onClose-javaslang.control.Try.CheckedRunnable-" target="_blank">sse.onClose(Runnable)</a> callback allow you to clean and release resources on connection close. A connection is closed when you call <a href="/apidocs/org/jooby/Sse.html#close--" target="_blank">sse.close()</a> method or the client/browser close the connection.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/events/:id"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">sse</span><span class="o">.</span><span class="na">onClose</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="c1">// clean up resources</span>
    <span class="o">});</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A connection close event is detected and fired when you attempt to send some data.</p> 
       <h3 id="server-sent-events-keep-alive-time">keep alive time</h3> 
       <p>The keep alive time feature can be used to prevent connections from timing out:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/events/:id"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">sse</span><span class="o">.</span><span class="na">keepAlive</span><span class="o">(</span><span class="mi">15</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <p>The previous example will sent a <code class="highlighter-rouge codehilite">':'</code> message (empty comment) every 15 seconds to keep the connection alive. If the client drop the connection, then the <a href="/apidocs/org/jooby/Sse.html#onClose-javaslang.control.Try.CheckedRunnable-" target="_blank">sse.onClose(Runnable)</a> event will be fired it.</p> 
       <p>This feature is useful when you want to detect close events without waiting for the next time you send an event. But for example, if your application already generate events every 15s, then the use of keep alive is useless and you can avoid it.</p> 
       <h3 id="server-sent-events-require">require</h3> 
       <p>The <a href="/apidocs/org/jooby/Sse.html#require-java.lang.Class-" target="_blank">sse.require(Type)</a> methods let you access to application services:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">sse</span><span class="o">(</span><span class="s">"/events/:id"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">sse</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="server-sent-events-example">example</h3> 
       <p>The next example will generate a new event every 60s. It recovers from a server shutdown by using the <a href="/apidocs/org/jooby/Sse.html#lastEventId--" target="_blank">sse.lastEventId()</a> and clean resources on connection close.</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="c1">// creates an executor service</span>
  <span class="n">ScheduledExecutorService</span> <span class="n">executor</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newScheduledThreadPool</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

  <span class="n">sse</span><span class="o">(</span><span class="s">"/events"</span><span class="o">,</span> <span class="n">sse</span> <span class="o">-&gt;</span> <span class="o">{</span>

    <span class="c1">// if we go down, recover from last event ID we sent. Otherwise, start from zero.</span>
    <span class="kt">int</span> <span class="n">lastId</span> <span class="o">=</span> <span class="n">sse</span><span class="o">.</span><span class="na">lastEventId</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">orElse</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="n">AtomicInteger</span> <span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtomicInteger</span><span class="o">(</span><span class="n">lastId</span><span class="o">);</span>

    <span class="c1">// send events every 60s</span>
    <span class="n">ScheduledFuture</span><span class="o">&lt;?&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">Integer</span> <span class="n">id</span> <span class="o">=</span> <span class="n">next</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
      <span class="n">Object</span> <span class="n">data</span> <span class="o">=</span> <span class="n">findDataById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
      <span class="c1">// send data and id</span>
      <span class="n">sse</span><span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="n">data</span><span class="o">).</span><span class="na">id</span><span class="o">(</span><span class="n">id</span><span class="o">).</span><span class="na">send</span><span class="o">();</span>
    <span class="o">},</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>

    <span class="c1">// on connection lost, cancel 60s task</span>
    <span class="n">sse</span><span class="o">.</span><span class="na">onClose</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">future</span><span class="o">.</span><span class="na">cancel</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">});</span>

<span class="o">}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="web-sockets"> 
      <div class="datalist-title "> 
       <h2>web sockets</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>The use of web sockets is pretty easy too:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">ws</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">(</span><span class="n">message</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">value</span><span class="o">()));</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"connected"</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>A <a href="/apidocs/org/jooby/WebSocket.html" target="_blank">web socket</a> consist of a <strong>path pattern</strong> and a <a href="/apidocs/org/jooby/WebSocket.Handler.html" target="_blank">handler</a>.</p> 
       <p>A <strong>path pattern</strong> can be as simple or complex as you need. All the path patterns supported by routes are supported here.</p> 
       <p>A <a href="/apidocs/org/jooby/WebSocket.Handler.html" target="_blank">handler</a> is executed on new connections, from there we can listen for message, errors and/or send data to the client.</p> 
       <p>Keep in mind that <strong>web socket</strong> are not like routes. There is no stack/pipe or chain.</p> 
       <p>You can mount a socket to a path used by a route, but you can’t have two or more web sockets under the same path.</p> 
       <h3 id="web-sockets-require">require</h3> 
       <p>You can ask <a href="https://github.com/google/guice" target="_blank">Guice</a> to wired an object from the <a href="/apidocs/org/jooby/WebSocket.html#require-com.google.inject.Key-" target="_blank">ws.require(type)</a></p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">ws</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="o">(</span><span class="n">ws</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">A</span> <span class="n">a</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">A</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">});</span>
</code></pre> 
       </div> 
       <h3 id="web-sockets-consumes">consumes</h3> 
       <p>Web socket can define a type to consume:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">ws</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">(</span><span class="n">message</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">});</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"connected"</span><span class="o">);</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">consumes</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>This is just an utility method for parsing socket message to Java Object. Consumes in web sockets has nothing to do with content negotiation. Content negotiation is route concept, it doesn’t apply for web sockets.</p> 
       <h3 id="web-sockets-produces">produces</h3> 
       <p>Web socket can define a type to produce:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">ws</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
   <span class="n">MyObject</span> <span class="n">object</span> <span class="o">=</span> <span class="o">..;</span>
     <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">produces</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>This is just an utility method for formatting Java Objects as text message. Produces in web sockets has nothing to do with content negotiation. Content negotiation is route concept, it doesn’t apply for web sockets.</p> 
      </div> 
     </div> 
     <div class="datalist" id="cors"> 
      <div class="datalist-title "> 
       <h2>cors</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Cross-origin resource sharing (CORS) is a mechanism that allows restricted resources (e.g. fonts, JavaScript, etc.) on a web page to be requested from another domain outside the domain from which the resource originated.</p> 
       <h3 id="cors-usage">usage</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"*"</span><span class="o">,</span> <span class="k">new</span> <span class="n">CorsHandler</span><span class="o">());</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Previous example, will handle CORS request (simple or preflight).</p> 
       <p>Default options are defined via <code class="highlighter-rouge codehilite">.conf</code> file:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="err">cors</span> <span class="err">{</span>
  <span class="c"># Configures the Access-Control-Allow-Origin CORS header. Possibly values: *, domain, regex or a list of previous values. </span>
  <span class="c"># Example: </span>
  <span class="c"># "*" </span>
  <span class="c"># ["http://foo.com"] </span>
  <span class="c"># ["http://*.com"] </span>
  <span class="c"># ["http://foo.com", "http://bar.com"] </span>
  <span class="py">origin</span><span class="p">:</span> <span class="s">"*"</span>

  <span class="c"># If true, set the Access-Control-Allow-Credentials header </span>
  <span class="py">credentials</span><span class="p">:</span> <span class="s">true</span>

  <span class="c"># Allowed methods: Set the Access-Control-Allow-Methods header </span>
  <span class="py">allowedMethods</span><span class="p">:</span> <span class="s">[GET, POST]</span>

  <span class="c"># Allowed headers: set the Access-Control-Allow-Headers header. Possibly values: *, header name or a list of previous values. </span>
  <span class="c"># Examples </span>
  <span class="c"># "*" </span>
  <span class="c"># Custom-Header </span>
  <span class="c"># [Header-1, Header-2] </span>
  <span class="py">allowedHeaders</span><span class="p">:</span> <span class="s">[X-Requested-With, Content-Type, Accept, Origin]</span>

  <span class="c"># Preflight max age: number of seconds that preflight requests can be cached by the client </span>
  <span class="py">maxAge</span><span class="p">:</span> <span class="s">30m</span>

  <span class="c"># Set the Access-Control-Expose-Headers header </span>
  <span class="c"># exposedHeaders: [] </span>
<span class="err">}</span>
</code></pre> 
       </div> 
       <p><code class="highlighter-rouge codehilite">CORS</code> options are represented at runtime by <a href="/apidocs/org/jooby/handlers/Cors.html" target="_blank">Cors</a>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="xss"> 
      <div class="datalist-title "> 
       <h2>xss</h2> 
      </div> 
      <div class="datalist-content"> 
       <p><a href="https://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank">Cross-site scripting (XSS)</a> is a type of computer security vulnerability typically found in web applications. XSS enables attackers to inject client-side scripts into web pages viewed by other users.</p> 
       <p><a href="http://jooby.org">Jooby</a> provides a few XSS escapers and a simple and flexible way to provide custom and/or more featured XSS escapers.</p> 
       <p>Default XSS escapers are <code class="highlighter-rouge codehilite">urlFragment</code>, <code class="highlighter-rouge codehilite">formParam</code>, <code class="highlighter-rouge codehilite">pathSegment</code> and <code class="highlighter-rouge codehilite">html</code> all them from <a href="https://github.com/google/guava" target="_blank">Guava</a>.</p> 
       <p>More advanced/featured escapers like <code class="highlighter-rouge codehilite">js</code>, <code class="highlighter-rouge codehilite">css</code>, <code class="highlighter-rouge codehilite">sql</code> are provided via <a href="/doc/security">modules</a>.</p> 
       <h3 id="xss-usage">usage</h3> 
       <p>There are a few way of using XSS escape functions:</p> 
       <h4 id="xss-Applying-a-XSS-escaper-to-param-or-header-">Applying a XSS escaper to param or header:</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">safeParam</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"input"</span><span class="o">,</span> <span class="s">"html"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>

    <span class="n">String</span> <span class="n">safeHeader</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"input"</span><span class="o">,</span> <span class="s">"html"</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Here <code class="highlighter-rouge codehilite">input</code> is the <code class="highlighter-rouge codehilite">param/header</code> that you want to escape with the <code class="highlighter-rouge codehilite">html</code> escaper.</p> 
       <h4 id="xss-Applying-multiple-XSS-escapers-">Applying multiple XSS escapers:</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">safeInput</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"input"</span><span class="o">,</span> <span class="s">"urlFragment"</span><span class="o">,</span> <span class="s">"html"</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="xss-Applying-a-XSS-escaper-to-form-bean-">Applying a XSS escaper to form/bean:</h4> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">MyForm</span> <span class="n">form</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">params</span><span class="o">(</span><span class="s">"input"</span><span class="o">,</span> <span class="s">"html"</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="xss-Applying-a-XSS-escaper-from-template-engines">Applying a XSS escaper from template engines</h4> 
       <p>Template engines usually provide a way to escape <code class="highlighter-rouge codehilite">HTML</code> (mainly) … still <a href="http://jooby.org">Jooby</a> integrates XSS escapers with the template engine of your choice:</p> 
       <p><a href="/doc/hbs">handlebars</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="p">{</span><span class="err">{xss</span><span class="w"> </span><span class="err">input</span><span class="w"> </span><span class="nt">"js"</span><span class="w"> </span><span class="nt">"html"</span><span class="err">}}</span><span class="w"> </span></code></pre> 
       </div> 
       <p><a href="/doc/pebble">pebble</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="p">{</span><span class="err">{xss</span><span class="w"> </span><span class="err">(input,</span><span class="w"> </span><span class="nt">"js"</span><span class="err">,</span><span class="w"> </span><span class="nt">"html"</span><span class="err">)}}</span><span class="w"> </span></code></pre> 
       </div> 
       <p><a href="/doc/ftl">freemarker</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>${xss (input, "js", "html")}
</code></pre> 
       </div> 
       <p><a href="/doc/jade">jade</a>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>p= xss.apply(input, "js", "html")
</code></pre> 
       </div> 
       <h3 id="xss-modules">modules</h3> 
       <ul> 
        <li><a href="/doc/unbescape">unbescape</a>: XSS escapers via <a href="https://github.com/unbescape/unbescape" target="_blank">unbescape</a></li> 
        <li><a href="/doc/csl">csl</a>: XSS escapers via <a href="https://github.com/coverity/coverity-security-library" target="_blank">coverity-security-library</a></li> 
       </ul> 
      </div> 
     </div> 
     <div class="datalist" id="https"> 
      <div class="datalist-title "> 
       <h2>https</h2> 
      </div> 
      <div class="datalist-content"> 
       <p><code class="highlighter-rouge codehilite">HTTPS</code> is supported too across the available <a href="/doc/servers">server implementations</a>. To enable <code class="highlighter-rouge codehilite">HTTPS</code>, you need to set:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">application.securePort</span> <span class="p">=</span> <span class="s">8443</span>
</code></pre> 
       </div> 
       <p>Or programmatically like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="n">securePort</span><span class="o">(</span><span class="mi">8443</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="https-certificates">certificates</h3> 
       <p><a href="http://jooby.org">Jooby</a> comes with a self-signed certificate, useful for development and test. But of course, you should NEVER use it in the real world.</p> 
       <p>In order to setup HTTPS with a secure certificate, you need to set these properties:</p> 
       <ul> 
        <li><code class="highlighter-rouge codehilite">ssl.keystore.cert</code>: An X.509 certificate chain file in PEM format. It can be an absolute path or a classpath resource.</li> 
        <li><code class="highlighter-rouge codehilite">ssl.keystore.key</code>: A PKCS#8 private key file in PEM format. It can be an absolute path or a classpath resource.</li> 
       </ul> 
       <p>Optionally, you can set these too:</p> 
       <ul> 
        <li><code class="highlighter-rouge codehilite">ssl.keystore.password</code>: Password of the keystore.key (if any). Default is: null/empty.</li> 
        <li><code class="highlighter-rouge codehilite">ssl.trust.cert</code>: Trusted certificates for verifying the remote endpoint’s certificate. The file should contain an X.509 certificate chain in PEM format. Default uses the system default.</li> 
        <li><code class="highlighter-rouge codehilite">ssl.session.cacheSize</code>: Set the size of the cache used for storing SSL session objects. 0 to use the default value.</li> 
        <li><code class="highlighter-rouge codehilite">ssl.session.timeout</code>: Timeout for the cached SSL session objects, in seconds. 0 to use the default value.</li> 
       </ul> 
       <p>As you can see setup is very simple. All you need is your <code class="highlighter-rouge codehilite">.crt</code> and <code class="highlighter-rouge codehilite">.key</code> files.</p> 
      </div> 
     </div> 
     <div class="datalist" id="javascript"> 
      <div class="datalist-title "> 
       <h2>javascript</h2> 
      </div> 
      <div class="datalist-content"> 
       <p><a href="http://jooby.org">Jooby</a> is available in JavaScript via <a href="http://openjdk.java.net/projects/nashorn/" target="_blank">Nashorn</a>.</p> 
       <h3 id="javascript-hello-world">hello world</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">jooby</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="s1">'Hey Jooby!'</span><span class="p">);</span>

</code></pre> 
       </div> 
       <h3 id="javascript-jooby-function">jooby function</h3> 
       <p>The <code class="highlighter-rouge codehilite">jooby</code> function always returns a new application:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">jooby</span><span class="p">();</span>
</code></pre> 
       </div> 
       <p>or pass a function to <code class="highlighter-rouge codehilite">jooby</code>:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nx">jooby</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="s1">'Hey Jooby!'</span><span class="p">);</span>

<span class="p">})();</span>
</code></pre> 
       </div> 
       <p>Another minor but useful feature is the: <strong>import of classes</strong> and <strong>packages</strong> when you go with the functional version:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nx">jooby</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">Jackson</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">use</span><span class="p">(</span><span class="k">new</span> <span class="nx">Jackson</span><span class="p">());</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="s1">'Hey Jooby!'</span><span class="p">);</span>

<span class="p">})(</span><span class="nx">org</span><span class="p">.</span><span class="nx">jooby</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">Jackson</span><span class="p">);</span>
</code></pre> 
       </div> 
       <p>Or import an entire package:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nx">jooby</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">Jackson</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">use</span><span class="p">(</span><span class="k">new</span> <span class="nx">Jackson</span><span class="p">());</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="s1">'Hey Jooby!'</span><span class="p">);</span>

<span class="p">})(</span><span class="nx">org</span><span class="p">.</span><span class="nx">jooby</span><span class="p">.</span><span class="nx">json</span><span class="p">);</span>
</code></pre> 
       </div> 
       <p>Import of packages is done via: <code class="highlighter-rouge codehilite">importPackage</code> function from in <code class="highlighter-rouge codehilite">nashorn:mozilla_compat.js</code>.</p> 
       <h3 id="javascript-routes">routes</h3> 
       <p>Routes work as in Java, but it is worth to mention what are the available alternatives at the time you need to write a route in JavaScript:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nx">jooby</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="c1">// returns a constant value, using Function expression closures</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="s1">'Hey Jooby!'</span><span class="p">);</span>

  <span class="c1">// returns a constant value</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'Hey Jooby!'</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// returns a value but access to request object</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="nx">X</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">doSomething</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// access to request and rsp (like in express.js)</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">rsp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">rsp</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hey Jooby!'</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">// access to request and rsp</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">rsp</span><span class="p">,</span> <span class="nx">chain</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chain</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
  <span class="p">});</span>

<span class="p">})();</span>
</code></pre> 
       </div> 
       <h3 id="javascript-running-a-javascript-app">running a javascript app</h3> 
       <ul> 
        <li>via maven: <code class="highlighter-rouge codehilite">mvn jooby:run</code></li> 
        <li>java: <code class="highlighter-rouge codehilite">java org.jooby.Jooby</code>. The <code class="highlighter-rouge codehilite">app.js</code> file must be present in the app directory</li> 
       </ul> 
      </div> 
     </div> 
     <div class="datalist" id="jooby-conf"> 
      <div class="datalist-title "> 
       <h2>jooby.conf</h2> 
      </div> 
      <div class="datalist-content"> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="c">################################################################################################### </span>
<span class="c">#! application </span>
<span class="c">################################################################################################### </span>
<span class="err">application</span> <span class="err">{</span>

  <span class="c"># environment default is: dev </span>
  <span class="py">env</span> <span class="p">=</span> <span class="s">dev</span>

  <span class="c"># contains the simple name of the Application class. set it at runtime </span>
  <span class="c"># name = App.class.getSimpleName() </span>
  <span class="c"># application namespace, default to app package. set it at runtime </span>
  <span class="c"># ns = App.class.getPackage().getName() </span>
  <span class="c"># tmpdir </span>
  <span class="py">tmpdir</span> <span class="p">=</span> <span class="s">${java.io.tmpdir}/${application.name}</span>

  <span class="c"># path (a.k.a. as contextPath) </span>
  <span class="py">path</span> <span class="p">=</span> <span class="s">/</span>

  <span class="c"># localhost </span>
  <span class="py">host</span> <span class="p">=</span> <span class="s">localhost</span>

  <span class="c"># HTTP ports </span>
  <span class="py">port</span> <span class="p">=</span> <span class="s">8080</span>

  <span class="c"># uncomment to enabled HTTPS </span>
  <span class="c"># securePort = 8443 </span>
  <span class="c"># we do UTF-8 </span>
  <span class="py">charset</span> <span class="p">=</span> <span class="s">UTF-8</span>

  <span class="c"># date format </span>
  <span class="py">dateFormat</span> <span class="p">=</span> <span class="s">dd-MMM-yyyy</span>

  <span class="c"># number format, system default. set it at runtime </span>
  <span class="c"># numberFormat = DecimalFormat.getInstance(${application.lang})).toPattern() </span>
  <span class="c"># comma separated list of locale using the language tag format. Default to: Locale.getDefault() </span>
  <span class="c"># lang = Locale.getDefault() </span>
  <span class="c"># timezone, system default. set it at runtime </span>
  <span class="c"># tz = ZoneId.systemDefault().getId() </span>
  <span class="c"># redirect to/force https </span>
  <span class="c"># example: https://my.domain.com/{0} </span>
  <span class="py">redirect_https</span> <span class="p">=</span> <span class="s">""</span>

<span class="err">}</span>

<span class="err">ssl</span> <span class="err">{</span>

  <span class="c"># An X.509 certificate chain file in PEM format, provided certificate should NOT be used in prod. </span>
  <span class="py">keystore.cert</span> <span class="p">=</span> <span class="s">org/jooby/unsecure.crt </span>

  <span class="c"># A PKCS#8 private key file in PEM format, provided key should NOT be used in prod. </span>
  <span class="py">keystore.key</span> <span class="p">=</span> <span class="s">org/jooby/unsecure.key</span>

  <span class="c"># password of the keystore.key (if any) </span>
  <span class="c"># keystore.password = </span>
  <span class="c"># Trusted certificates for verifying the remote endpoint's certificate. The file should </span>
  <span class="c"># contain an X.509 certificate chain in PEM format. Default uses the system default. </span>
  <span class="c"># trust.cert = </span>
  <span class="c"># Set the size of the cache used for storing SSL session objects. 0 to use the </span>
  <span class="c"># default value. </span>
  <span class="py">session.cacheSize</span> <span class="p">=</span> <span class="s">0</span>

  <span class="c"># Timeout for the cached SSL session objects, in seconds. 0 to use the default value. </span>
  <span class="py">session.timeout</span> <span class="p">=</span> <span class="s">0</span>

<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! session defaults </span>
<span class="c">################################################################################################### </span>
<span class="err">session</span> <span class="err">{</span>

  <span class="c"># we suggest a timeout, but usage and an implementation is specific to a Session.Store implementation </span>
  <span class="py">timeout</span> <span class="p">=</span> <span class="s">30m</span>

  <span class="c"># save interval, how frequently we must save a none-dirty session (in millis). </span>
  <span class="py">saveInterval</span> <span class="p">=</span> <span class="s">60s</span>

  <span class="err">cookie</span> <span class="err">{</span>

    <span class="c"># name of the cookie </span>
    <span class="py">name</span> <span class="p">=</span> <span class="s">jooby.sid</span>

    <span class="c"># cookie path </span>
    <span class="py">path</span> <span class="p">=</span> <span class="s">/</span>

    <span class="c"># expires when the user closes the web browser </span>
    <span class="py">maxAge</span> <span class="p">=</span> <span class="s">-1</span>

    <span class="py">httpOnly</span> <span class="p">=</span> <span class="s">true</span>

    <span class="py">secure</span> <span class="p">=</span> <span class="s">false</span>

  <span class="err">}</span>

<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! flash scope defaults </span>
<span class="c">################################################################################################### </span>
<span class="err">flash</span> <span class="err">{</span>

  <span class="err">cookie</span> <span class="err">{</span>

    <span class="py">name</span> <span class="p">=</span> <span class="s">jooby.flash</span>

    <span class="py">path</span> <span class="p">=</span> <span class="s">${application.path}</span>

    <span class="py">httpOnly</span> <span class="p">=</span> <span class="s">true</span>

    <span class="py">secure</span> <span class="p">=</span> <span class="s">false</span>

  <span class="err">}</span>

<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! server defaults </span>
<span class="c">################################################################################################### </span>
<span class="err">server</span> <span class="err">{</span>

  <span class="err">http</span> <span class="err">{</span>

    <span class="py">HeaderSize</span> <span class="p">=</span> <span class="s">8k</span>

    <span class="c"># Max response buffer size </span>
    <span class="py">ResponseBufferSize</span> <span class="p">=</span> <span class="s">16k</span>

    <span class="c"># Max request body size to keep in memory </span>
    <span class="py">RequestBufferSize</span> <span class="p">=</span> <span class="s">1m</span>

    <span class="c"># Max request size total (body + header) </span>
    <span class="py">MaxRequestSize</span> <span class="p">=</span> <span class="s">200k</span>

    <span class="py">IdleTimeout</span> <span class="p">=</span> <span class="s">0</span>

    <span class="py">Method</span> <span class="p">=</span> <span class="s">""</span>

  <span class="err">}</span>

  <span class="err">threads</span> <span class="err">{</span>

    <span class="py">Min</span> <span class="p">=</span> <span class="s">20</span>

    <span class="py">Max</span> <span class="p">=</span> <span class="s">100</span>

    <span class="py">IdleTimeout</span> <span class="p">=</span> <span class="s">60s</span>

  <span class="err">}</span>

  <span class="err">routes</span> <span class="err">{</span>

    <span class="c"># Guava Cache Spec </span>
    <span class="py">Cache</span> <span class="p">=</span> <span class="s">"concurrencyLevel="${runtime.concurrencyLevel}",maximumSize="${server.threads.Max}</span>

  <span class="err">}</span>

  <span class="err">ws</span> <span class="err">{</span>

    <span class="c"># The maximum size of a text message. </span>
    <span class="py">MaxTextMessageSize</span> <span class="p">=</span> <span class="s">16k</span>

    <span class="c"># The maximum size of a binary message. </span>
    <span class="py">MaxBinaryMessageSize</span> <span class="p">=</span> <span class="s">16k</span>

    <span class="c"># The time in ms (milliseconds) that a websocket may be idle before closing. </span>
    <span class="py">IdleTimeout</span> <span class="p">=</span> <span class="s">5minutes</span>

  <span class="err">}</span>

  <span class="err">http2</span> <span class="err">{</span>

    <span class="py">cleartext</span> <span class="p">=</span> <span class="s">true</span>

    <span class="py">enabled</span> <span class="p">=</span> <span class="s">false</span>

  <span class="err">}</span>

<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! assets </span>
<span class="c">################################################################################################### </span>
<span class="err">assets</span> <span class="err">{</span>

  <span class="c">#! If asset CDN is present, the asset router will do a redirect to CDN and wont serve the file locally </span>
  <span class="c">#! /assets/js/index.js -&gt; redirectTo(cdn + assets/js/index.js) </span>
  <span class="py">cdn</span> <span class="p">=</span>  <span class="s">""</span>

  <span class="py">etag</span> <span class="p">=</span> <span class="s">true</span>

  <span class="py">lastModified</span> <span class="p">=</span> <span class="s">true</span>

  <span class="py">env</span> <span class="p">=</span> <span class="s">${application.env}</span>

  <span class="py">charset</span> <span class="p">=</span> <span class="s">${application.charset}</span>

  <span class="c"># -1 to disable or HOCON duration value </span>
  <span class="py">cache.maxAge</span> <span class="p">=</span> <span class="s">-1</span>

<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! Cross origin resource sharing </span>
<span class="c">################################################################################################### </span>
<span class="err">cors</span> <span class="err">{</span>

  <span class="c"># Configures the Access-Control-Allow-Origin CORS header. Possibly values: *, domain, regex or a list of previous values. </span>
  <span class="c"># Example: </span>
  <span class="c"># "*" </span>
  <span class="c"># ["http://foo.com"] </span>
  <span class="c"># ["http://*.com"] </span>
  <span class="c"># ["http://foo.com", "http://bar.com"] </span>
  <span class="py">origin</span><span class="p">:</span> <span class="s">"*"</span>

  <span class="c"># If true, set the Access-Control-Allow-Credentials header </span>
  <span class="py">credentials</span><span class="p">:</span> <span class="s">true</span>

  <span class="c"># Allowed methods: Set the Access-Control-Allow-Methods header </span>
  <span class="py">allowedMethods</span><span class="p">:</span> <span class="s">[GET, POST]</span>

  <span class="c"># Allowed headers: set the Access-Control-Allow-Headers header. Possibly values: *, header name or a list of previous values. </span>
  <span class="c"># Examples </span>
  <span class="c"># "*" </span>
  <span class="c"># Custom-Header </span>
  <span class="c"># [Header-1, Header-2] </span>
  <span class="py">allowedHeaders</span><span class="p">:</span> <span class="s">[X-Requested-With, Content-Type, Accept, Origin]</span>

  <span class="c"># Preflight max age: number of seconds that preflight requests can be cached by the client </span>
  <span class="py">maxAge</span><span class="p">:</span> <span class="s">30m</span>

  <span class="c"># Set the Access-Control-Expose-Headers header </span>
  <span class="c"># exposedHeaders: [] </span>
<span class="err">}</span>

<span class="c">################################################################################################### </span>
<span class="c">#! runtime </span>
<span class="c">################################################################################################### </span>
<span class="c">#! number of available processors, set it at runtime </span>
<span class="c">#! runtime.processors = Runtime.getRuntime().availableProcessors() </span>
<span class="c">#! runtime.processors-plus1 = ${runtime.processors} + 1 </span>
<span class="c">#! runtime.processors-plus2 = ${runtime.processors} + 2 </span>
<span class="c">#! runtime.processors-x2 = ${runtime.processors} * 2 </span>
<span class="c">################################################################################################### </span>
<span class="c">#! status codes </span>
<span class="c">################################################################################################### </span>
<span class="py">err.java.lang.IllegalArgumentException</span> <span class="p">=</span> <span class="s">400</span>

<span class="py">err.java.util.NoSuchElementException</span> <span class="p">=</span> <span class="s">400</span>

<span class="py">err.java.io.FileNotFoundException</span> <span class="p">=</span> <span class="s">404</span>

<span class="c">################################################################################################### </span>
<span class="c">#! alias </span>
<span class="c">################################################################################################### </span>
<span class="py">contextPath</span> <span class="p">=</span> <span class="s">${application.path}</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="datalist" id="mime-properties"> 
      <div class="datalist-title "> 
       <h2>mime.properties</h2> 
      </div> 
      <div class="datalist-content"> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="py">mime.ai</span><span class="p">=</span><span class="s">application/postscript</span>

<span class="py">mime.aif</span><span class="p">=</span><span class="s">audio/x-aiff</span>

<span class="py">mime.aifc</span><span class="p">=</span><span class="s">audio/x-aiff</span>

<span class="py">mime.aiff</span><span class="p">=</span><span class="s">audio/x-aiff</span>

<span class="py">mime.apk</span><span class="p">=</span><span class="s">application/vnd.android.package-archive</span>

<span class="py">mime.asc</span><span class="p">=</span><span class="s">text/plain</span>

<span class="py">mime.asf</span><span class="p">=</span><span class="s">video/x.ms.asf</span>

<span class="py">mime.asx</span><span class="p">=</span><span class="s">video/x.ms.asx</span>

<span class="py">mime.au</span><span class="p">=</span><span class="s">audio/basic</span>

<span class="py">mime.avi</span><span class="p">=</span><span class="s">video/x-msvideo</span>

<span class="py">mime.bcpio</span><span class="p">=</span><span class="s">application/x-bcpio</span>

<span class="py">mime.bin</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.bmp</span><span class="p">=</span><span class="s">image/bmp</span>

<span class="py">mime.cab</span><span class="p">=</span><span class="s">application/x-cabinet</span>

<span class="py">mime.cdf</span><span class="p">=</span><span class="s">application/x-netcdf</span>

<span class="py">mime.class</span><span class="p">=</span><span class="s">application/java-vm</span>

<span class="py">mime.cpio</span><span class="p">=</span><span class="s">application/x-cpio</span>

<span class="py">mime.cpt</span><span class="p">=</span><span class="s">application/mac-compactpro</span>

<span class="py">mime.crt</span><span class="p">=</span><span class="s">application/x-x509-ca-cert</span>

<span class="py">mime.csh</span><span class="p">=</span><span class="s">application/x-csh</span>

<span class="py">mime.css</span><span class="p">=</span><span class="s">text/css</span>

<span class="py">mime.scss</span><span class="p">=</span><span class="s">text/css</span>

<span class="py">mime.less</span><span class="p">=</span><span class="s">text/css</span>

<span class="py">mime.csv</span><span class="p">=</span><span class="s">text/comma-separated-values</span>

<span class="py">mime.dcr</span><span class="p">=</span><span class="s">application/x-director</span>

<span class="py">mime.dir</span><span class="p">=</span><span class="s">application/x-director</span>

<span class="py">mime.dll</span><span class="p">=</span><span class="s">application/x-msdownload</span>

<span class="py">mime.dms</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.doc</span><span class="p">=</span><span class="s">application/msword</span>

<span class="py">mime.dtd</span><span class="p">=</span><span class="s">application/xml-dtd</span>

<span class="py">mime.dvi</span><span class="p">=</span><span class="s">application/x-dvi</span>

<span class="py">mime.dxr</span><span class="p">=</span><span class="s">application/x-director</span>

<span class="py">mime.eps</span><span class="p">=</span><span class="s">application/postscript</span>

<span class="py">mime.etx</span><span class="p">=</span><span class="s">text/x-setext</span>

<span class="py">mime.exe</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.ez</span><span class="p">=</span><span class="s">application/andrew-inset</span>

<span class="py">mime.gif</span><span class="p">=</span><span class="s">image/gif</span>

<span class="py">mime.gtar</span><span class="p">=</span><span class="s">application/x-gtar</span>

<span class="py">mime.gz</span><span class="p">=</span><span class="s">application/gzip</span>

<span class="py">mime.gzip</span><span class="p">=</span><span class="s">application/gzip</span>

<span class="py">mime.hdf</span><span class="p">=</span><span class="s">application/x-hdf</span>

<span class="py">mime.hqx</span><span class="p">=</span><span class="s">application/mac-binhex40</span>

<span class="py">mime.htc</span><span class="p">=</span><span class="s">text/x-component</span>

<span class="py">mime.htm</span><span class="p">=</span><span class="s">text/html</span>

<span class="py">mime.html</span><span class="p">=</span><span class="s">text/html</span>

<span class="py">mime.ice</span><span class="p">=</span><span class="s">x-conference/x-cooltalk</span>

<span class="py">mime.ico</span><span class="p">=</span><span class="s">image/x-icon</span>

<span class="py">mime.ief</span><span class="p">=</span><span class="s">image/ief</span>

<span class="py">mime.iges</span><span class="p">=</span><span class="s">model/iges</span>

<span class="py">mime.igs</span><span class="p">=</span><span class="s">model/iges</span>

<span class="py">mime.jad</span><span class="p">=</span><span class="s">text/vnd.sun.j2me.app-descriptor</span>

<span class="py">mime.jar</span><span class="p">=</span><span class="s">application/java-archive</span>

<span class="py">mime.java</span><span class="p">=</span><span class="s">text/plain</span>

<span class="py">mime.jnlp</span><span class="p">=</span><span class="s">application/x-java-jnlp-file</span>

<span class="py">mime.jpe</span><span class="p">=</span><span class="s">image/jpeg</span>

<span class="py">mime.jpeg</span><span class="p">=</span><span class="s">image/jpeg</span>

<span class="py">mime.jpg</span><span class="p">=</span><span class="s">image/jpeg</span>

<span class="py">mime.js</span><span class="p">=</span><span class="s">application/javascript</span>

<span class="py">mime.ts</span><span class="p">=</span><span class="s">application/javascript</span>

<span class="py">mime.coffee</span><span class="p">=</span><span class="s">application/javascript</span>

<span class="py">mime.json</span><span class="p">=</span><span class="s">application/json</span>

<span class="py">mime.yaml</span><span class="p">=</span><span class="s">application/yaml</span>

<span class="py">mime.jsp</span><span class="p">=</span><span class="s">text/html</span>

<span class="py">mime.kar</span><span class="p">=</span><span class="s">audio/midi</span>

<span class="py">mime.latex</span><span class="p">=</span><span class="s">application/x-latex</span>

<span class="py">mime.lha</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.lzh</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.man</span><span class="p">=</span><span class="s">application/x-troff-man</span>

<span class="py">mime.mathml</span><span class="p">=</span><span class="s">application/mathml+xml</span>

<span class="py">mime.me</span><span class="p">=</span><span class="s">application/x-troff-me</span>

<span class="py">mime.mesh</span><span class="p">=</span><span class="s">model/mesh</span>

<span class="py">mime.mid</span><span class="p">=</span><span class="s">audio/midi</span>

<span class="py">mime.midi</span><span class="p">=</span><span class="s">audio/midi</span>

<span class="py">mime.mif</span><span class="p">=</span><span class="s">application/vnd.mif</span>

<span class="py">mime.mol</span><span class="p">=</span><span class="s">chemical/x-mdl-molfile</span>

<span class="py">mime.mov</span><span class="p">=</span><span class="s">video/quicktime</span>

<span class="py">mime.movie</span><span class="p">=</span><span class="s">video/x-sgi-movie</span>

<span class="py">mime.mp2</span><span class="p">=</span><span class="s">audio/mpeg</span>

<span class="py">mime.mp3</span><span class="p">=</span><span class="s">audio/mpeg</span>

<span class="py">mime.mpe</span><span class="p">=</span><span class="s">video/mpeg</span>

<span class="py">mime.mpeg</span><span class="p">=</span><span class="s">video/mpeg</span>

<span class="py">mime.mpg</span><span class="p">=</span><span class="s">video/mpeg</span>

<span class="py">mime.mpga</span><span class="p">=</span><span class="s">audio/mpeg</span>

<span class="py">mime.ms</span><span class="p">=</span><span class="s">application/x-troff-ms</span>

<span class="py">mime.msh</span><span class="p">=</span><span class="s">model/mesh</span>

<span class="py">mime.msi</span><span class="p">=</span><span class="s">application/octet-stream</span>

<span class="py">mime.nc</span><span class="p">=</span><span class="s">application/x-netcdf</span>

<span class="py">mime.oda</span><span class="p">=</span><span class="s">application/oda</span>

<span class="py">mime.odb</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.database</span>

<span class="py">mime.odc</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.chart</span>

<span class="py">mime.odf</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.formula</span>

<span class="py">mime.odg</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.graphics</span>

<span class="py">mime.odi</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.image</span>

<span class="py">mime.odm</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.text-master</span>

<span class="py">mime.odp</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.presentation</span>

<span class="py">mime.ods</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.spreadsheet</span>

<span class="py">mime.odt</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.text</span>

<span class="py">mime.ogg</span><span class="p">=</span><span class="s">application/ogg</span>

<span class="py">mime.otc</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.chart-template</span>

<span class="py">mime.otf</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.formula-template</span>

<span class="py">mime.otg</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.graphics-template</span>

<span class="py">mime.oth</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.text-web</span>

<span class="py">mime.oti</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.image-template</span>

<span class="py">mime.otp</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.presentation-template</span>

<span class="py">mime.ots</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.spreadsheet-template</span>

<span class="py">mime.ott</span><span class="p">=</span><span class="s">application/vnd.oasis.opendocument.text-template</span>

<span class="py">mime.pbm</span><span class="p">=</span><span class="s">image/x-portable-bitmap</span>

<span class="py">mime.pdb</span><span class="p">=</span><span class="s">chemical/x-pdb</span>

<span class="py">mime.pdf</span><span class="p">=</span><span class="s">application/pdf</span>

<span class="py">mime.pgm</span><span class="p">=</span><span class="s">image/x-portable-graymap</span>

<span class="py">mime.pgn</span><span class="p">=</span><span class="s">application/x-chess-pgn</span>

<span class="py">mime.png</span><span class="p">=</span><span class="s">image/png</span>

<span class="py">mime.pnm</span><span class="p">=</span><span class="s">image/x-portable-anymap</span>

<span class="py">mime.ppm</span><span class="p">=</span><span class="s">image/x-portable-pixmap</span>

<span class="py">mime.pps</span><span class="p">=</span><span class="s">application/vnd.ms-powerpoint</span>

<span class="py">mime.ppt</span><span class="p">=</span><span class="s">application/vnd.ms-powerpoint</span>

<span class="py">mime.ps</span><span class="p">=</span><span class="s">application/postscript</span>

<span class="py">mime.qml</span><span class="p">=</span><span class="s">text/x-qml</span>

<span class="py">mime.qt</span><span class="p">=</span><span class="s">video/quicktime</span>

<span class="py">mime.ra</span><span class="p">=</span><span class="s">audio/x-pn-realaudio</span>

<span class="py">mime.ram</span><span class="p">=</span><span class="s">audio/x-pn-realaudio</span>

<span class="py">mime.ras</span><span class="p">=</span><span class="s">image/x-cmu-raster</span>

<span class="py">mime.rdf</span><span class="p">=</span><span class="s">application/rdf+xml</span>

<span class="py">mime.rgb</span><span class="p">=</span><span class="s">image/x-rgb</span>

<span class="py">mime.rm</span><span class="p">=</span><span class="s">audio/x-pn-realaudio</span>

<span class="py">mime.roff</span><span class="p">=</span><span class="s">application/x-troff</span>

<span class="py">mime.rpm</span><span class="p">=</span><span class="s">application/x-rpm</span>

<span class="py">mime.rtf</span><span class="p">=</span><span class="s">application/rtf</span>

<span class="py">mime.rtx</span><span class="p">=</span><span class="s">text/richtext</span>

<span class="py">mime.rv</span><span class="p">=</span><span class="s">video/vnd.rn-realvideo</span>

<span class="py">mime.ser</span><span class="p">=</span><span class="s">application/java-serialized-object</span>

<span class="py">mime.sgm</span><span class="p">=</span><span class="s">text/sgml</span>

<span class="py">mime.sgml</span><span class="p">=</span><span class="s">text/sgml</span>

<span class="py">mime.sh</span><span class="p">=</span><span class="s">application/x-sh</span>

<span class="py">mime.shar</span><span class="p">=</span><span class="s">application/x-shar</span>

<span class="py">mime.silo</span><span class="p">=</span><span class="s">model/mesh</span>

<span class="py">mime.sit</span><span class="p">=</span><span class="s">application/x-stuffit</span>

<span class="py">mime.skd</span><span class="p">=</span><span class="s">application/x-koan</span>

<span class="py">mime.skm</span><span class="p">=</span><span class="s">application/x-koan</span>

<span class="py">mime.skp</span><span class="p">=</span><span class="s">application/x-koan</span>

<span class="py">mime.skt</span><span class="p">=</span><span class="s">application/x-koan</span>

<span class="py">mime.smi</span><span class="p">=</span><span class="s">application/smil</span>

<span class="py">mime.smil</span><span class="p">=</span><span class="s">application/smil</span>

<span class="py">mime.snd</span><span class="p">=</span><span class="s">audio/basic</span>

<span class="py">mime.spl</span><span class="p">=</span><span class="s">application/x-futuresplash</span>

<span class="py">mime.src</span><span class="p">=</span><span class="s">application/x-wais-source</span>

<span class="py">mime.sv4cpio</span><span class="p">=</span><span class="s">application/x-sv4cpio</span>

<span class="py">mime.sv4crc</span><span class="p">=</span><span class="s">application/x-sv4crc</span>

<span class="py">mime.svg</span><span class="p">=</span><span class="s">image/svg+xml</span>

<span class="py">mime.swf</span><span class="p">=</span><span class="s">application/x-shockwave-flash</span>

<span class="py">mime.t</span><span class="p">=</span><span class="s">application/x-troff</span>

<span class="py">mime.tar</span><span class="p">=</span><span class="s">application/x-tar</span>

<span class="py">mime.tar.gz</span><span class="p">=</span><span class="s">application/x-gtar</span>

<span class="py">mime.tcl</span><span class="p">=</span><span class="s">application/x-tcl</span>

<span class="py">mime.tex</span><span class="p">=</span><span class="s">application/x-tex</span>

<span class="py">mime.texi</span><span class="p">=</span><span class="s">application/x-texinfo</span>

<span class="py">mime.texinfo</span><span class="p">=</span><span class="s">application/x-texinfo</span>

<span class="py">mime.tgz</span><span class="p">=</span><span class="s">application/x-gtar</span>

<span class="py">mime.tif</span><span class="p">=</span><span class="s">image/tiff</span>

<span class="py">mime.tiff</span><span class="p">=</span><span class="s">image/tiff</span>

<span class="py">mime.tr</span><span class="p">=</span><span class="s">application/x-troff</span>

<span class="py">mime.tsv</span><span class="p">=</span><span class="s">text/tab-separated-values</span>

<span class="py">mime.txt</span><span class="p">=</span><span class="s">text/plain</span>

<span class="py">mime.ustar</span><span class="p">=</span><span class="s">application/x-ustar</span>

<span class="py">mime.vcd</span><span class="p">=</span><span class="s">application/x-cdlink</span>

<span class="py">mime.vrml</span><span class="p">=</span><span class="s">model/vrml</span>

<span class="py">mime.vxml</span><span class="p">=</span><span class="s">application/voicexml+xml</span>

<span class="py">mime.wav</span><span class="p">=</span><span class="s">audio/x-wav</span>

<span class="py">mime.wbmp</span><span class="p">=</span><span class="s">image/vnd.wap.wbmp</span>

<span class="py">mime.wml</span><span class="p">=</span><span class="s">text/vnd.wap.wml</span>

<span class="py">mime.wmlc</span><span class="p">=</span><span class="s">application/vnd.wap.wmlc</span>

<span class="py">mime.wmls</span><span class="p">=</span><span class="s">text/vnd.wap.wmlscript</span>

<span class="py">mime.wmlsc</span><span class="p">=</span><span class="s">application/vnd.wap.wmlscriptc</span>

<span class="py">mime.wrl</span><span class="p">=</span><span class="s">model/vrml</span>

<span class="err">mime.wtls-ca-</span><span class="py">certificate</span><span class="p">=</span><span class="s">application/vnd.wap.wtls-ca-certificate</span>

<span class="py">mime.xbm</span><span class="p">=</span><span class="s">image/x-xbitmap</span>

<span class="py">mime.xht</span><span class="p">=</span><span class="s">application/xhtml+xml</span>

<span class="py">mime.xhtml</span><span class="p">=</span><span class="s">application/xhtml+xml</span>

<span class="py">mime.xls</span><span class="p">=</span><span class="s">application/vnd.ms-excel</span>

<span class="py">mime.xml</span><span class="p">=</span><span class="s">application/xml</span>

<span class="py">mime.xpm</span><span class="p">=</span><span class="s">image/x-xpixmap</span>

<span class="py">mime.xsd</span><span class="p">=</span><span class="s">application/xml</span>

<span class="py">mime.xsl</span><span class="p">=</span><span class="s">application/xml</span>

<span class="py">mime.xslt</span><span class="p">=</span><span class="s">application/xslt+xml</span>

<span class="py">mime.xul</span><span class="p">=</span><span class="s">application/vnd.mozilla.xul+xml</span>

<span class="py">mime.xwd</span><span class="p">=</span><span class="s">image/x-xwindowdump</span>

<span class="py">mime.xyz</span><span class="p">=</span><span class="s">chemical/x-xyz</span>

<span class="py">mime.z</span><span class="p">=</span><span class="s">application/compress</span>

<span class="py">mime.zip</span><span class="p">=</span><span class="s">application/zip</span>

<span class="py">mime.conf</span><span class="p">=</span><span class="s">application/hocon</span>

<span class="c">#! fonts </span>
<span class="py">mime.ttf</span><span class="p">=</span><span class="s">font/truetype</span>

<span class="py">mime.otf</span><span class="p">=</span><span class="s">font/opentype</span>

<span class="py">mime.eot</span><span class="p">=</span><span class="s">application/vnd.ms-fontobject</span>

<span class="py">mime.woff</span><span class="p">=</span><span class="s">application/x-font-woff</span>

<span class="py">mime.woff2</span><span class="p">=</span><span class="s">application/font-woff2</span>

<span class="c">#! source map </span>
<span class="py">mime.map</span><span class="p">=</span><span class="s">text/plain</span>
</code></pre> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </main> 
  <footer class="site-footer"> 
   <div class="row"> 
    <p class="pull-left">©2014-2016 <a href="https://twitter.com/joobyproject" target="_blank">The Jooby Project</a>, all rights reserved.</p> 
    <div class="altquimia">
     DG 
     <a href="http://www.altquimia.com/" title="Altquimia | Creative Studio" rel="nofollow" target="_blank">Altquimia</a> | Creative Studio
    </div> 
    <div class="follow-us pull-right"> 
     <p>Follow us</p>
     <a href="https://github.com/jooby-project/jooby" title="Follow us on Github" target="_blank" rel="nofollow"><span class="icon-github-medium-circle"></span></a>
     <a href="https://twitter.com/joobyproject" title="Follow us on Twitter" target="_blank" rel="nofollow"><span class="icon-twitter-medium-circle"></span></a> 
    </div> 
   </div> 
  </footer> 
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> 
  <script>window.jQuery || document.write('<script src="/resources/scripts/jquery-2.1.4.min.js"><\/script>')</script> 
  <script src="/resources/scripts/libs/swiper.min.js"></script> 
  <script src="/resources/scripts/application.js"></script> 
  <script src="//jooby.org/resources/scripts/ZeroClipboard.min.js"></script> 
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57151281-1', 'auto');
      ga('send', 'pageview');
    </script>  
 </body>
</html>
